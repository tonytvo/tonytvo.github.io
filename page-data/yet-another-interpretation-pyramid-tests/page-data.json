{"componentChunkName":"component---src-templates-blog-post-js","path":"/yet-another-interpretation-pyramid-tests/","result":{"data":{"site":{"siteMetadata":{"title":"Conversations on agile technical practices and investments","disqus":{"shortName":"trungvo"}}},"markdownRemark":{"id":"36823c89-3efe-5113-8a1f-520b34e106e1","excerpt":"In recent conversations regarding automating tests, It seems to me that the common understanding of the team is that the only acceptable automated test case is…","html":"<p>In recent conversations regarding automating tests, It seems to me that the common understanding of the team is that the only acceptable automated test case is through the workflow tests through the UI. As far as I know, that’s not entirely correct and per “Pyramids of Automation” chapter 15 in More Agile Testing, I think there are lots of different ways we can automate test cases. I would like to take the opportunity to describe the pyramids of automation again with some thoughts/questions.</p>\n<p>First, let me try to describe the original pyramid again, and here’s the picture that is worth thousands of words</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d6462c13ed4b3315ce5fd10b5abdd9aa/f6386/tradition-pyramid-tests.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.54430379746836%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFUlEQVR42pWTbW/aMBCA+/9/RtV92karbhMvGnRreQmFQAskKSFgO4lDEpLYiUscCAkTpSqaFHWdZVk66x49Z+vubF+0sizbbDbb7TZJEs55nueFaWcFZJ7xmPu+DyEMgoBzHkXRR+E8zxlj8XptGkYYUhIQxth/wPv93nZcfelr0GQRe7v8N3x88/2j8unLj6vqLTCdA/wR89Ewg+bVjXheqn6utKqdyconhfICM+dcA4aiIWUGlRmcLgyo42y3+5DZcVckWj/z7TPfHHac+JR5fvAefKyKUDoz3JGKvpUb1+X65fdatdGCNlWBFcfxe+ZstxNl0FHwL3F2/rVyUapdXNZKtXZXwc0xkjSjGD5q8dIVJkCcmj1F7z8ZPcXoHU79EKpYGC/84K+fO5mTJMGWHZCQ0IiGjJCIUEZCRikjlAUk9HyKl3aapgVlW7ZrB2wVxrrtIcu1vNBaEcP2Dcd/CanPEssLXdd7k7/CYRTJc6xhoqJVZyBX6q3qTbtcb16XG+Wfd41WfyiDOSaaGchzc71en8x5no1U1FWwOLX6U2uoOV1Jr3elxr18O5j9Hqj9KRbVZX9qiepSkE15bpxgLyB3Q1WQUGcCW6NF83HeHgNBQl1ZFyZQkFB7tGiNFu0x6ExgR0LNB5XQ8BVO013yMri7NAUAPCkKghBBiE0TQoAQ1HUdLIDrOOlhwnmSJGl6aLg/h+63VtTflK0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"typical pyramind tests info-graphics\"\n        title=\"\"\n        src=\"/static/d6462c13ed4b3315ce5fd10b5abdd9aa/f058b/tradition-pyramid-tests.png\"\n        srcset=\"/static/d6462c13ed4b3315ce5fd10b5abdd9aa/c26ae/tradition-pyramid-tests.png 158w,\n/static/d6462c13ed4b3315ce5fd10b5abdd9aa/6bdcf/tradition-pyramid-tests.png 315w,\n/static/d6462c13ed4b3315ce5fd10b5abdd9aa/f058b/tradition-pyramid-tests.png 630w,\n/static/d6462c13ed4b3315ce5fd10b5abdd9aa/f6386/tradition-pyramid-tests.png 686w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Per the above pyramid from Mike Cohn with some modification in “More Agile Testing”, the lowest level, the unit tests, gets the fastest feedback on every commit which would provide the most benefits. <strong>The higher the tests located in the pyramid texts, the slower the feedback and lower profit we would get from the automated tests.</strong></p>\n<p><strong>“The test automation pyramid is a model intended to guide teams in getting the most value from their test automation for the minimum investment and with the least overlap/duplication between each pyramid level.”</strong></p>\n<p>Let’s expand the above pyramid with some specific tools/context for our team</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac4270eae110b9d868b3f67d61bbaf15/4b190/csi-intepretation-pyramind-tests.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECA//EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeyUyD//xAAVEAEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAQABBQJr/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRABAQADAQAAAAAAAAAAAAAAAQARITGB/9oACAEBAAE/IfLZxkgNmW//2gAMAwEAAgADAAAAEEfv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAFxABAAMAAAAAAAAAAAAAAAAAAQARIf/aAAgBAQABPxACsBCikC7xmu7CsYiBc//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"expanded pyramind tests per company context\"\n        title=\"\"\n        src=\"/static/ac4270eae110b9d868b3f67d61bbaf15/828fb/csi-intepretation-pyramind-tests.jpg\"\n        srcset=\"/static/ac4270eae110b9d868b3f67d61bbaf15/ff44c/csi-intepretation-pyramind-tests.jpg 158w,\n/static/ac4270eae110b9d868b3f67d61bbaf15/a6688/csi-intepretation-pyramind-tests.jpg 315w,\n/static/ac4270eae110b9d868b3f67d61bbaf15/828fb/csi-intepretation-pyramind-tests.jpg 630w,\n/static/ac4270eae110b9d868b3f67d61bbaf15/4b190/csi-intepretation-pyramind-tests.jpg 800w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>With the expanded pyramid tests, we can see that we need to leverage different tools and techniques to do different automated testings at different levels</p>\n<p>Given the above pyramids tests, I think there’s still 1 missing piece in the puzzle.</p>\n<p>According to How to implement UI Testing without shooting yourselves in the foot, in order to avoid maintenance costs of UI tests, a very good idea when designing UI level functional tests is to think about describing the UI test and the automation at these 3 different levels:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/08b7394132bb3818071a712958bd8df4/5a190/describing-ui-tests.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.79746835443038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlklEQVR42oWPzWsTURDA949VT15FvNRDEUIPgvZQENqTHkQNCNLaFmIQUwQ/arCEliYxu933utk37yvva9/uuk/MSvCi+R2GYWZ+M0xkCz9f5IWvqyoILtRCVXXQ7nexrH6G/xLN2I9uugtcFGVg52/p5KSqwozGr9JdkDyE0ITmn3Km508vdpwLNMfT43uTfkdJB0bsDR8b69dcxovrhyeb3oZh/uE4eXIw3bm4PiNKdnr3rSvXyFcaP5ps5ZAfjra7XzovPz/ofd9LGNo62zRu3eWpSe6ijdHw2aB36/WLG2+6Nz/1b388f34n3TDOrfmZFXo/7U3Gg/Hlu9Ovh99Oj6aX/dF4cIDf+7L+e7RpmlX8IxfOSyKltJwbKY1cWCGtlEYzzbnQS4wxSilrrVJqlTdNExlr4mSGMUrTJE2vMEZZhufzDGeYEMIY45wLIRhjAMAYo5QCgJSyruvIWhvHMUIIY4wQyrKML6GUcs5bv3Va2i0AoJSKyrLMlxBC2jYhBADIEgBYCZxza60xRmutlPLe/wLgEF9NIc96/AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"describe UI tests at 3 different levels\"\n        title=\"\"\n        src=\"/static/08b7394132bb3818071a712958bd8df4/f058b/describing-ui-tests.png\"\n        srcset=\"/static/08b7394132bb3818071a712958bd8df4/c26ae/describing-ui-tests.png 158w,\n/static/08b7394132bb3818071a712958bd8df4/6bdcf/describing-ui-tests.png 315w,\n/static/08b7394132bb3818071a712958bd8df4/f058b/describing-ui-tests.png 630w,\n/static/08b7394132bb3818071a712958bd8df4/5a190/describing-ui-tests.png 800w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>“The stability in acceptance tests comes from the fact that business rules don’t change as much as technical implementations”</strong></p>\n<p>Technology moves much faster than business. <strong>The closer your acceptance tests are to the business rules, the more stable they are and the more clearer it is to the entire team (QA, Dev, PdM, etc…) on what the systems, products suppose to behave</strong>. The acceptance tests could be written in the form of unit tests, integration tests, UI tests, etc… The team usually would decide if they could automate the acceptance criteria and at what test level they want to automate the acceptance criteria.</p>\n<p>As far as I can tell, the problems we often encountered with integration, UI tests are slowness in getting the feedback, hard to diagnose the problems when the tests fail (especially performance tests), flaky tests, etc… As a result, I feel that <strong>the more acceptance tests could be written in the form of unit behavior tests, the better alignment between the code and the business domain/behavior. This could lead to other benefits such as ubiquitous language for the entire team and design test-ability for the system/product and the better design skills of the team working in the system.</strong></p>\n<p>Based on all of the above information, I ask myself, “should we call unit tests as behavior unit tests instead of units tests?”. Yes there is some behavior that is at such a low level that people don’t care about, but there are LOTS of behavior unit tests that in HIGH LEVEL that different stakeholders SHOULD know about</p>\n<p>My colleague (David) summarizes this article in the following key points and I couldn’t find a better way to put it together and here it is:</p>\n<ul>\n<li>If we move our conversation around test to business rules we will all have more clarity and will decouple our conversations from the details. We will gain stability (because our terms don’t - change with the technical details) and clarity because we focus on the actual goal</li>\n<li>Thinking at the business rule level allows us to determine if that business rule can be tested at a level lower than the UI</li>\n<li>Some business rules can be tested at the unit test level, in which case we should adopt the term behavioral unit test to help people comprehend that those tests are actually testing business rules.</li>\n</ul>\n<h1 id=\"references\" style=\"position:relative;\"><a href=\"#references\" aria-label=\"references permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>References</h1>\n<ul>\n<li><a href=\"https://www.slideshare.net/jbrains/the-next-decade-of-agile-software-development\">https://www.slideshare.net/jbrains/the-next-decade-of-agile-software-development</a></li>\n<li><a href=\"https://gojko.net/2010/04/13/how-to-implement-ui-testing-without-shooting-yourself-in-the-foot-2/\">https://gojko.net/2010/04/13/how-to-implement-ui-testing-without-shooting-yourself-in-the-foot-2/</a></li>\n<li><a href=\"https://watirmelon.blog/2011/06/10/yet-another-software-testing-pyramid/\">https://watirmelon.blog/2011/06/10/yet-another-software-testing-pyramid/</a></li>\n<li><a href=\"https://jamescrisp.org/2011/05/30/automated-testing-and-the-test-pyramid/\">https://jamescrisp.org/2011/05/30/automated-testing-and-the-test-pyramid/</a></li>\n<li><a href=\"https://martinfowler.com/articles/practical-test-pyramid.html\">https://martinfowler.com/articles/practical-test-pyramid.html</a></li>\n</ul>","frontmatter":{"title":"Yet another interpretation of pyramid tests","date":"May 01, 2017","description":"Yet another interpretation of pyramid tests"}},"previous":null,"next":{"fields":{"slug":"/code-retreat-2017-retrospective/"},"frontmatter":{"title":"Code Retreat 2017 Retrospective"}}},"pageContext":{"id":"36823c89-3efe-5113-8a1f-520b34e106e1","previousPostId":null,"nextPostId":"49d35b87-15fd-5518-a461-15f57d4167d1"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}