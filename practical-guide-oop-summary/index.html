<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.6.0"/><meta data-react-helmet="true" name="description" content="practical guide to object oriented design summary"/><meta data-react-helmet="true" property="og:title" content="practical guide to object oriented design by Sandi Metz summary - wip"/><meta data-react-helmet="true" property="og:description" content="practical guide to object oriented design summary"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="ttrungvo"/><meta data-react-helmet="true" name="twitter:title" content="practical guide to object oriented design by Sandi Metz summary - wip"/><meta data-react-helmet="true" name="twitter:description" content="practical guide to object oriented design summary"/><style data-href="/styles.ef50494f5cc49b2e5f8c.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-8d7d79679b70dbe27172b6460e7a7910.woff2) format("woff2"),url(/static/montserrat-latin-100-ec38980a9e0119a379e2a9b3dbb1901a.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-e279051046ba1286706adc886cf1c96b.woff2) format("woff2"),url(/static/montserrat-latin-100italic-3b325a3173c8207435cd1b76e19bf501.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-9d266fbbfa6cab7009bd56003b1eeb67.woff2) format("woff2"),url(/static/montserrat-latin-200-2d8ba08717110d27122e54c34b8a5798.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-6e5b3756583bb2263eb062eae992735e.woff2) format("woff2"),url(/static/montserrat-latin-200italic-a0d6f343e4b536c582926255367a57da.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-00b3e893aab5a8fd632d6342eb72551a.woff2) format("woff2"),url(/static/montserrat-latin-300-ea303695ceab35f17e7d062f30e0173b.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-56f34ea368f6aedf89583d444bbcb227.woff2) format("woff2"),url(/static/montserrat-latin-300italic-54b0bf2c8c4c12ffafd803be2466a790.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-b71748ae4f80ec8c014def4c5fa8688b.woff2) format("woff2"),url(/static/montserrat-latin-400-0659a9f4e90db5cf51b50d005bff1e41.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-6eed6b4cbb809c6efc7aa7ddad6dbe3e.woff2) format("woff2"),url(/static/montserrat-latin-400italic-7583622cfde30ae49086d18447ab28e7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-091b209546e16313fd4f4fc36090c757.woff2) format("woff2"),url(/static/montserrat-latin-500-edd311588712a96bbf435fad264fff62.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c90ced68b46050061d1a41842d6dfb43.woff2) format("woff2"),url(/static/montserrat-latin-500italic-5146cbfe02b1deea5dffea27a5f2f998.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-0480d2f8a71f38db8633b84d8722e0c2.woff2) format("woff2"),url(/static/montserrat-latin-600-b77863a375260a05dd13f86a1cee598f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-cf46ffb11f3a60d7df0567f8851a1d00.woff2) format("woff2"),url(/static/montserrat-latin-600italic-c4fcfeeb057724724097167e57bd7801.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7dbcc8a5ea2289d83f657c25b4be6193.woff2) format("woff2"),url(/static/montserrat-latin-700-99271a835e1cae8c76ef8bba99a8cc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-c41ad6bdb4bd504a843d546d0a47958d.woff2) format("woff2"),url(/static/montserrat-latin-700italic-6779372f04095051c62ed36bc1dcc142.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-db9a3e0ba7eaea32e5f55328ace6cf23.woff2) format("woff2"),url(/static/montserrat-latin-800-4e3c615967a2360f5db87d2f0fd2456f.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-bf45bfa14805969eda318973947bc42b.woff2) format("woff2"),url(/static/montserrat-latin-800italic-fe82abb0bcede51bf724254878e0c374.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-e66c7edc609e24bacbb705175669d814.woff2) format("woff2"),url(/static/montserrat-latin-900-8211f418baeb8ec880b80ba3c682f957.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-4454c775e48152c1a72510ceed3603e2.woff2) format("woff2"),url(/static/montserrat-latin-900italic-efcaa0f6a82ee0640b83a0916e6e8d68.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-fc117160c69a8ea0851b26dd14748ee4.woff2) format("woff2"),url(/static/merriweather-latin-300-58b18067ebbd21fda77b67e73c241d3b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-fe29961474f8dbf77c0aa7b9a629e4bc.woff2) format("woff2"),url(/static/merriweather-latin-300italic-23c3f1f88683618a4fb8d265d33d383a.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-d9479e8023bef9cbd9bf8d6eabd6bf36.woff2) format("woff2"),url(/static/merriweather-latin-400-040426f99ff6e00b86506452e0d1f10b.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-2de7bfeaf08fb03d4315d49947f062f7.woff2) format("woff2"),url(/static/merriweather-latin-400italic-79db67aca65f5285964ab332bd65f451.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-4b08e01d805fa35d7bf777f1b24314ae.woff2) format("woff2"),url(/static/merriweather-latin-700-22fb8afba4ab1f093b6ef9e28a9b6e92.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-cd92541b177652fffb6e3b952f1c33f1.woff2) format("woff2"),url(/static/merriweather-latin-700italic-f87f3d87cea0dd0979bfc8ac9ea90243.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-f813fc6a4bee46eda5224ac7ebf1b7be.woff2) format("woff2"),url(/static/merriweather-latin-900-5d4e42cb44410674acd99153d57df032.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-b7901d85486871c1779c0e93ddd85656.woff2) format("woff2"),url(/static/merriweather-latin-900italic-9647f9fdab98756989a8a5550eb205c3.woff) format("woff")}


/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}:root{--maxWidth-none:"none";--maxWidth-xs:20rem;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:56rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-2xl);--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--fontFamily-sans:Montserrat,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--fontFamily-serif:"Merriweather","Georgia",Cambria,"Times New Roman",Times,serif;--font-body:var(--fontFamily-serif);--font-heading:var(--fontFamily-sans);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:16px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.625;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#005b99;--color-text:#2e353f;--color-text-light:#4f5969;--color-heading:#1a202c;--color-heading-black:#000;--color-accent:#d1dce5}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:var(--fontSize-root);line-height:var(--lineHeight-normal)}body{color:var(--color-text);font-family:var(--font-body);font-size:var(--fontSize-1)}footer{padding:var(--spacing-6) var(--spacing-0)}hr{background:var(--color-accent);border:0;height:1px}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);letter-spacing:-.025em;line-height:var(--lineHeight-tight);margin-bottom:var(--spacing-6);margin-top:var(--spacing-12)}h2,h3,h4,h5,h6{color:var(--color-heading);font-weight:var(--fontWeight-bold)}h1{color:var(--color-heading-black);font-size:var(--fontSize-6);font-weight:var(--fontWeight-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{--baseline-multiplier:0.179;--x-height-multiplier:0.35;line-height:var(--lineHeight-relaxed);margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0)}ol,p,ul{padding:var(--spacing-0)}ol,ul{list-style-image:none;list-style-position:outside;margin-bottom:var(--spacing-8);margin-left:var(--spacing-0);margin-right:var(--spacing-0)}ol li,ul li{padding-left:var(--spacing-0)}li>p,ol li,ul li{margin-bottom:calc(var(--spacing-8)/2)}li :last-child{margin-bottom:var(--spacing-0)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{border-left:var(--spacing-1) solid var(--color-primary);color:var(--color-text-light);font-size:var(--fontSize-2);font-style:italic;margin-bottom:var(--spacing-8);margin-left:calc(var(--spacing-6)*-1);margin-right:var(--spacing-8);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-6)}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote>ol,blockquote>ul{list-style-position:inside}table{border-collapse:collapse;border-spacing:.25rem;margin-bottom:var(--spacing-8);width:100%}table thead tr th{border-bottom:1px solid var(--color-accent)}a{color:var(--color-primary)}a:focus,a:hover{text-decoration:none}.global-wrapper{margin:var(--spacing-0) auto;max-width:var(--maxWidth-wrapper);padding:var(--spacing-10) var(--spacing-5)}.global-wrapper[data-is-root-path=true] .bio{margin-bottom:var(--spacing-20)}.global-header{margin-bottom:var(--spacing-12)}.main-heading{font-size:var(--fontSize-7);margin:0}.post-list-item{margin-bottom:var(--spacing-8);margin-top:var(--spacing-8)}.post-list-item p{margin-bottom:var(--spacing-0)}.post-list-item h2{color:var(--color-primary);font-size:var(--fontSize-4);margin-bottom:var(--spacing-2);margin-top:var(--spacing-0)}.post-list-item header{margin-bottom:var(--spacing-4)}.header-link-home{font-family:var(--font-heading);font-size:var(--fontSize-2);font-weight:var(--fontWeight-bold);text-decoration:none}.bio{display:flex;margin-bottom:var(--spacing-16)}.bio-avatar,.bio p{margin-bottom:var(--spacing-0)}.bio-avatar{border-radius:100%;margin-right:var(--spacing-4);min-width:50px}.blog-post header h1{margin:var(--spacing-0) var(--spacing-0) var(--spacing-4) var(--spacing-0)}.blog-post header p{font-family:var(--font-heading);font-size:var(--fontSize-2)}.blog-post-nav ul{margin:var(--spacing-0)}.gatsby-highlight{margin-bottom:var(--spacing-8)}@media (max-width:42rem){blockquote{margin-left:var(--spacing-0);padding:var(--spacing-0) var(--spacing-0) var(--spacing-0) var(--spacing-4)}ol,ul{list-style-position:inside}}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#000;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px #fff;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:hsla(0,0%,100%,.5);color:#9a6e3a}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="Tony Vo Blog RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=b811602c8c8ce14b66aae6613c8968f4" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b811602c8c8ce14b66aae6613c8968f4"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b811602c8c8ce14b66aae6613c8968f4"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b811602c8c8ce14b66aae6613c8968f4"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b811602c8c8ce14b66aae6613c8968f4"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b811602c8c8ce14b66aae6613c8968f4"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b811602c8c8ce14b66aae6613c8968f4"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b811602c8c8ce14b66aae6613c8968f4"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b811602c8c8ce14b66aae6613c8968f4"/><title data-react-helmet="true">practical guide to object oriented design by Sandi Metz summary - wip | Conversations on agile technical practices and investments</title></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><header class="global-header"><a class="header-link-home" href="/">Conversations on agile technical practices and investments</a></header><main><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">practical guide to object oriented design by Sandi Metz summary - wip</h1><p>December 31, 2021</p></header><section itemProp="articleBody"><h1 id="table-of-contents" style="position:relative;"><a href="#table-of-contents" aria-label="table of contents permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Table of Contents</h1>
<ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#goalskey-ideascontext">Goals/Key Ideas/Context</a></li>
<li><a href="#rediscovering-simplicity">rediscovering simplicity</a>
<ul>
<li><a href="#simplifying-code">simplifying code</a>
<ul>
<li><a href="#incomprehensibly-concise">incomprehensibly concise</a></li>
<li><a href="#speculatively-general">speculatively general</a></li>
<li><a href="#concretely-abstract">concretely abstract</a></li>
<li><a href="#shameless-green">shameless green</a></li>
</ul>
</li>
<li><a href="#judging-the-code">judging the code</a>
<ul>
<li><a href="#evaluating-code-based-on-opinion">evaluating code based on opinion</a></li>
<li><a href="#evaluating-code-based-on-facts">evaluating code based on facts</a></li>
</ul>
</li>
<li><a href="#judging-the-design">judging the design</a></li>
</ul>
</li>
<li><a href="#tdd-as-design">TDD as design</a>
<ul>
<li><a href="#understand-transformations">understand transformations</a></li>
<li><a href="#tolerating-duplication">tolerating duplication</a></li>
<li><a href="#exposing-responsibilities">exposing responsibilities</a></li>
<li><a href="#choosing-names">choosing names</a></li>
<li><a href="#avoiding-the-echo-chamber">avoiding the echo-chamber</a></li>
<li><a href="#writing-cost-effective-tests">writing cost-effective tests</a>
<ul>
<li><a href="#intentional-testing">intentional testing</a>
<ul>
<li><a href="#test-benefits">test benefits</a></li>
<li><a href="#knowing-what-to-test">knowing what to test</a></li>
<li><a href="#knowing-when-to-test">knowing when to test</a></li>
<li><a href="#knowing-how-to-test">knowing how to test</a></li>
</ul>
</li>
<li><a href="#testing-incoming-messages">testing incoming messages</a>
<ul>
<li><a href="#deleting-unused-interfaces">deleting unused interfaces</a></li>
<li><a href="#providing-the-public-interface">providing the public interface</a></li>
<li><a href="#isolating-the-object-under-test">isolating the object under test</a></li>
<li><a href="#injecting-dependencies-using-classes">injecting dependencies using classes</a></li>
<li><a href="#injecting-dependencies-as-roles">injecting dependencies as roles</a></li>
</ul>
</li>
<li><a href="#creating-test-double">creating test double</a></li>
<li><a href="#using-tests-to-document-roles">using tests to document roles</a></li>
<li><a href="#testing-private-methods">testing private methods</a></li>
<li><a href="#testing-outgoing-messages">testing outgoing messages</a></li>
<li><a href="#testing-duck-types">testing duck types</a></li>
<li><a href="#testing-inherited-code">testing inherited code</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#unearthing-concepts">unearthing concepts</a>
<ul>
<li><a href="#listening-to-change">listening to change</a></li>
<li><a href="#starting-with-the-openclose-principle">starting with the open/close principle</a></li>
<li><a href="#follow-the-flocking-rules">follow the flocking rules</a></li>
<li><a href="#converging-on-abstractions">converging on abstractions</a></li>
<li><a href="#creating-classes-with-single-responsibility">creating classes with single responsibility</a>
<ul>
<li><a href="#determining-if-a-class-has-a-single-responsibility">determining if a class has a single responsibility</a></li>
<li><a href="#writing-code-that-embraces-change">writing code that embraces change</a></li>
<li><a href="#enforce-single-responsibility-everywhere">enforce single responsibility everywhere</a></li>
</ul>
</li>
<li><a href="#creating-flexible-interfaces">creating flexible interfaces</a>
<ul>
<li><a href="#find-good-public-interface">find good public interface</a></li>
<li><a href="#create-explicit-interfaces">create explicit interfaces</a></li>
<li><a href="#honor-the-public-interfaces-of-others">honor the public interfaces of others</a></li>
<li><a href="#exercise-caution-when-depending-on-private-interfaces">exercise caution when depending on private interfaces</a></li>
<li><a href="#minimize-context">minimize context</a></li>
<li><a href="#the-law-of-demeter">the law of demeter</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#practising-refactoring-horizontally">practising refactoring horizontally</a>
<ul>
<li><a href="#replacing-difference-with-sameness">replacing difference with sameness</a></li>
<li><a href="#equivocating-about-names">Equivocating about names</a></li>
<li><a href="#obeying-the-liskov-substitution-principle">obeying the liskov substitution principle</a></li>
<li><a href="#depending-on-abstraction">depending on abstraction</a></li>
</ul>
</li>
<li><a href="#separating-responsibilities">separating responsibilities</a>
<ul>
<li><a href="#managing-dependencies">managing dependencies</a></li>
<li><a href="#selecting-the-target-code-smell">selecting the target code smell</a></li>
<li><a href="#extracting-classes">extracting classes</a>
<ul>
<li><a href="#modelling-abstractions">modelling abstractions</a></li>
<li><a href="#naming-classes">naming classes</a></li>
</ul>
</li>
<li><a href="#combing-objects-with-composition">combing objects with composition</a></li>
</ul>
</li>
<li><a href="#achieving-openness">Achieving openness</a>
<ul>
<li><a href="#sharing-role-behavior-with-modules">Sharing role behavior with modules</a></li>
<li><a href="#acquiring-behavior-through-inheritance">acquiring behavior through inheritance</a>
<ul>
<li><a href="#understanding-classical-inheritance">understanding classical inheritance</a></li>
<li><a href="#recognizing-where-to-use-inheritance">recognizing where to use inheritance</a></li>
</ul>
</li>
<li><a href="#writing-inheritable-code">writing inheritable code</a></li>
</ul>
</li>
<li><a href="#quotes">Quotes</a></li>
<li><a href="#references">References</a></li>
</ul>
<h1 id="goalskey-ideascontext" style="position:relative;"><a href="#goalskey-ideascontext" aria-label="goalskey ideascontext permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Goals/Key Ideas/Context</h1>
<ul>
<li>concrete, repeatable techniques that can be employed to improve applications
<ul>
<li>strive for simplicity, focus on smells, concentrate on difference, take small steps, follow the flocking rules, refactoring under green, fix easy problem first</li>
<li>following the horizontal path means writing code to produce every kind of verse before diverging onto tangents to DRY out small bits of code that the verses have in common. The goal is to quickly maximize the number of whole examples before extracting abstractions from their parts.</li>
<li>in addition, deal with new requirements by first refactoring existing code to be open to them and then writing new code to meet them.</li>
</ul>
</li>
<li>you should not reach for abstractions, but instead you should resist them until they absolutely insist upon being created.</li>
<li>writing code is the process of working your way to the next stable end point, not the end point itself</li>
<li>If your goal is to write straightforward code, these metrics (ABC metrics) point you toward <code class="language-text">Shameless Green</code></li>
</ul>
<h1 id="rediscovering-simplicity" style="position:relative;"><a href="#rediscovering-simplicity" aria-label="rediscovering simplicity permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>rediscovering simplicity</h1>
<ul>
<li>
<p>getting insight into potential expense of code</p>
<ul>
<li>how difficult was it to write?</li>
<li>how hard is it to understand?</li>
<li>how expensive will it be to change?</li>
</ul>
</li>
<li>
<p>terminology: method vs sending messages</p>
<ul>
<li>a “method” is defined on an object and contains behavior</li>
<li>a “message” is sent to an object to invoke behavior
<ul>
<li><code class="language-text">song() { verses(); }</code> means that song method sends the verses message to the receiver this.</li>
<li>therefore, <strong>method are defined, and messages are sent</strong></li>
<li>“sending messages” are preferred to “call a method/function” as it implicitly encourage to create message senders that are willfully ignorant of implementation details, and fosters independence between senders and receivers.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>code is easy to understand when it clearly reflects the problem it’s solving, and thus openly exposes that problem’s domain</strong></p>
</li>
</ul>
<h2 id="simplifying-code" style="position:relative;"><a href="#simplifying-code" aria-label="simplifying code permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>simplifying code</h2>
<ul>
<li>speculatively general and concretely abstract were both written with an eye toward reducing future costs, and it is distressing to see good intentions fail so spectacularly. <strong>The failure here is not bad intention - it’s insufficient patience.</strong></li>
</ul>
<h3 id="incomprehensibly-concise" style="position:relative;"><a href="#incomprehensibly-concise" aria-label="incomprehensibly concise permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>incomprehensibly concise</h3>
<ul>
<li><a href="https://github.com/marina-ferreira/99_bottles_of_oop/blob/main/chapter_1/01_incomprehensibly_concise.rb">incomprehensibly concise code</a>
<ul>
<li>embeds a great deal of logic into the verse string</li>
<li>the code is hard to understand because it is inconsistent and duplicative (pluralization logic), and because it contains hidden concepts that it does not name</li>
</ul>
</li>
</ul>
<h3 id="speculatively-general" style="position:relative;"><a href="#speculatively-general" aria-label="speculatively general permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>speculatively general</h3>
<ul>
<li><a href="https://github.com/marina-ferreira/99_bottles_of_oop/blob/main/chapter_1/02_speculatively_general.rb">speculatively general code</a>
<ul>
<li>there’s far more code here  than is needed to pass the tests. This unnecessary code took time to write</li>
<li>the many levels of indirection are confusing. You could study this code for a long time without discerning why they are needed</li>
<li>you may feel compelled to understand its purpose before making changes.</li>
<li>what is the rule to determine which verse should be sung next? buried deep within the NoMore lambda is a hard-coded “99,” which might cause one to infer that verse 99 follows verse 0.</li>
</ul>
</li>
</ul>
<h3 id="concretely-abstract" style="position:relative;"><a href="#concretely-abstract" aria-label="concretely abstract permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>concretely abstract</h3>
<ul>
<li><strong>“DRY makes sense when it reduces the cost of change more than it increases the cost of understanding the code”</strong></li>
<li>DRYing out code is not free. It adds a level of indirection, and layers of indirection make the details of what’s happening harder to understanding.</li>
<li><a href="https://github.com/marina-ferreira/99_bottles_of_oop/blob/main/chapter_1/03_concretely_abstract.rb">concretely abstract code</a>
<ul>
<li>it clearly took a fair amount of thought and time.</li>
<li>the individual methods are easy to understand, it’s tough to get a sense of the entire song. The parts doesn’t seem to add up to the whole</li>
<li>while changing the code inside any individual method is cheap, in many cases, one simple change will cascade and force many other changes.</li>
<li>what is the rule to determine which verse should be sung next? Ditto.</li>
</ul>
</li>
</ul>
<h3 id="shameless-green" style="position:relative;"><a href="#shameless-green" aria-label="shameless green permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>shameless green</h3>
<ul>
<li>shameless green is defined as the solution that quickly reaches green while prioritizing understandability over changeability.</li>
<li>it doesn’t dispute that DRY is good, rather, it believes that it is cheaper to manage temporary duplication than recover from incorrect abstractions.</li>
<li><a href="https://github.com/marina-ferreira/99_bottles_of_oop/blob/main/chapter_1/04_shameless_green.rb">shameless green</a>
<ul>
<li>it was easy to write and understand</li>
<li>it will be cheap to change. Even though the verse strings are duplicated, if one verse changes it’s easy to keep the others in sync.</li>
<li>what is the rule to determine which verse should be sung next? This is still not explicit. The 0 verse contains a deeply buried, hard-coded 99</li>
</ul>
</li>
</ul>
<h2 id="judging-the-code" style="position:relative;"><a href="#judging-the-code" aria-label="judging the code permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>judging the code</h2>
<h3 id="evaluating-code-based-on-opinion" style="position:relative;"><a href="#evaluating-code-based-on-opinion" aria-label="evaluating code based on opinion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>evaluating code based on opinion</h3>
<ul>
<li>look for context/concrete guidance of what the code trying to accomplish</li>
<li><strong>any pile of code can be made to work; good code not only works, but it also simple, understandable, expressive and changeable</strong></li>
</ul>
<h3 id="evaluating-code-based-on-facts" style="position:relative;"><a href="#evaluating-code-based-on-facts" aria-label="evaluating code based on facts permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>evaluating code based on facts</h3>
<ul>
<li>you can think of metrics as crowd-sourced opinions about the quality of code.</li>
<li>measuring programmer productivity by counting lines of code (SLOC))
<ul>
<li>easily garnered and reproduced, it reflects code volume but suffers from many flaws</li>
</ul>
</li>
<li>Cyclomatic complexity
<ul>
<li>an algorithm that counts the number of unique execution paths through a body of source code. The more deeply nested conditionals, the higher Cyclomatic complexity</li>
<li>the code with fewer nested conditionals (lower cyclomatic complexity) is easier to reason with and maintain</li>
<li>can be used to limit the overall complexity. You can set standards for how high a score you’re willing to accept.</li>
<li>you can use it to determine if you’ave written enough tests, as it tells you the minimum number of tests needed to cover all the logic in the code.</li>
</ul>
</li>
<li>Assignments, branches and conditions (ABC) metrics
<ul>
<li>assignments is a count of variable assignments</li>
<li>branches counts not branches of an if statement but branches of control, meaning function calls or message sends</li>
<li>conditions counts conditional logic</li>
<li>ABC scores reflect cognitive load as opposed to physical size. High ABC numbers indicate code that takes up a lot of mental space.</li>
</ul>
</li>
<li><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/2b2d4dc88312b005c36cde35cf6e6b6c/0a47e/sloc-abc-metrics.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 61.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABtUlEQVR42o2Ty0sCURTG549s1aJdixZBu1pFm2jZRlAQcaGO5kJIkuiBhroxlKIgDXuYPZh35jgz6sz4xblxByuxPjjMnHPP/M7jMoJpmhgMBphMJvA871/m+/7MODEE7pAoMM+45uUI1J1t28yhytM23RFZqVRCu91m0Ok4NwZ0XRfj8XgmkMf4Mx6Po1ar/Q0cjUYzgVSI74Z8URTRaDQC4M8JAiAZvxQ6IBEsl8uh2+0yn+KpVAr1ej0AcnEYA1J3w+EwOPQ86mbCYpFIBK3WbQBIJpO4uGgEkGaziU6nE5wzIB/LsixUKlV4Y5Ml2I6DWCyG7tM9813XQzqdwlm5BtP+Kp7NZlEsFn8DqZqu6wiHQ9jaraN0TlAX0WgUp+VrSPrXDgv5DBZX97G0cccgtJJqpfxtbIFeaDxJkrCXEbGwcoxQog3H0pEWE1heP8JO+Aa21cNhIYe1zTzWti/hOBYKB3kkMoc4qb6g3zfh+x4EfoO0y4eHR7SaV+h/GOj1PqAoCjRNhqZKUFUDsqzg3VDxbihwHIdNJcsqXt9k9j1JwB/SNB30ez5LFlTNmJtLI38CbpWKE4kApFgAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="metrics chart comparison"
        title=""
        src="/static/2b2d4dc88312b005c36cde35cf6e6b6c/0a47e/sloc-abc-metrics.png"
        srcset="/static/2b2d4dc88312b005c36cde35cf6e6b6c/c26ae/sloc-abc-metrics.png 158w,
/static/2b2d4dc88312b005c36cde35cf6e6b6c/6bdcf/sloc-abc-metrics.png 315w,
/static/2b2d4dc88312b005c36cde35cf6e6b6c/0a47e/sloc-abc-metrics.png 600w"
        sizes="(max-width: 600px) 100vw, 600px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></li>
<li>metrics are fallible but human opinion is no more precise. Checking metrics regularly will keep you humble and improve your code.</li>
</ul>
<h2 id="judging-the-design" style="position:relative;"><a href="#judging-the-design" aria-label="judging the design permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>judging the design</h2>
<ul>
<li><strong>Don’t do</strong> big upfront design (BUFD)
<ul>
<li>designs in BUFD cannot possibly be correct as many things will change during the act of programming</li>
<li>BUFD inevitable leads to an adversarial relationship between customers and programmers.</li>
</ul>
</li>
<li>make design decisions only when you must with the information you have at that time
<ul>
<li>postpone decisions until you are absolutely forced to make them</li>
<li>any decision you make in advance on an explicit requirement is just a guess. Preserve your ability to make a decision later</li>
</ul>
</li>
<li>metrics are not direct indicators of quality but are proxies for a deeper measurement.</li>
<li>The ultimate software metric would be cost per feature over time interval that matters, but this is not easy to calculate. Cost, feature, and time are individually difficult to define, track and measure.</li>
<li>your goal is to write software with the lowest cost per feature.</li>
<li>you decision about how much design to do depends on 2 things: your skills and your time frame.
<ul>
<li>there is a tradeoff between the amount of time spent designing and the amount of time this design saves in the future (and there is a break-even point).</li>
<li>when the act of design prevents software from being delivered on time, you have lost.</li>
</ul>
</li>
</ul>
<h1 id="tdd-as-design" style="position:relative;"><a href="#tdd-as-design" aria-label="tdd as design permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TDD as design</h1>
<ul>
<li>while it is important to consider the problem and sketch out an overall plan before writing the first test, don’t over think it</li>
<li>you can’t figure out what’s right until you write some tests. The purpose of some of your tests might very well be to prove that they represent bad ideas.</li>
<li>the code should have the following qualities
<ul>
<li>transparent
<ul>
<li>the consequences of change should be obvious in the code that is changing and in distant code that relies upon it</li>
</ul>
</li>
<li>reasonable
<ul>
<li>small changes in requirements require correspondingly small changes in code</li>
<li>changes has no unexpected side effects</li>
</ul>
</li>
<li>usable
<ul>
<li>existing code should be usable in new and unexpected contexts</li>
</ul>
</li>
<li>exemplary
<ul>
<li>the code itself should encourage those who change it to perpetuate these qualities</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="understand-transformations" style="position:relative;"><a href="#understand-transformations" aria-label="understand transformations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>understand transformations</h2>
<ul>
<li>
<p><a href="https://blog.cleancoder.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html">transformation priority premise</a></p>
</li>
<li>
<p><strong>if you choose the tests and implementations that employ transformations that are higher on the list, you will avoid the impasse</strong></p>
</li>
<li>
<p>the code go through a sequence of transformation from <strong>specific to generic</strong></p>
</li>
<li>
<p>the process</p>
<ul>
<li>when passing a test, prefer higher priority transformations</li>
<li>when posing a test choose one that can be passed with higher priority transformations</li>
<li>when an implementation seems to require a low priority transformation, backtrack to see if there is a simpler test to pass</li>
</ul>
</li>
<li>
<p><code class="language-text">{} -> nil</code> no code at all -> code that employs nil</p>
<ul>
<li>as we write the first test <code class="language-text">wrapNullEmptyString()</code>, we also write the failing implementation which also employs <code class="language-text">({} -> nil)</code></li>
</ul>
</li>
<li>
<p><code class="language-text">nil->constant</code></p>
<ul>
<li>we can make the first test pass by return empty string, which apply <code class="language-text">nil->constant</code> transformation</li>
</ul>
</li>
<li>
<p><code class="language-text">(constant->constant+)</code>: a simple constant to a more complex constant</p>
<ul>
<li>we can then write the next test that employs <code class="language-text">(constant->constant+)</code></li>
<li><code class="language-text">oneShortWordDoesNotWrap() { assertThat(wrap("word", 5), is("word")) }</code></li>
</ul>
</li>
<li>
<p><code class="language-text">(unconditional->if)</code></p>
</li>
<li>
<p><code class="language-text">(constant->scalar)</code></p>
<ul>
<li>variable is a generalization of constants</li>
<li>making the <code class="language-text">oneShortWordDoesNotWrap</code> test pass by using both <code class="language-text">(unconditional->if)</code> and <code class="language-text">(constant->scalar)</code></li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">wrap</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> s<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<ul>
<li><code class="language-text">statement->statements</code></li>
<li><code class="language-text">(scalar->array)</code></li>
<li><code class="language-text">(array->container)</code></li>
<li><code class="language-text">(statement->recursion)</code></li>
<li><code class="language-text">(if->while)</code></li>
</ul>
<p>from</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>
  s <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
result <span class="token operator">+=</span> s<span class="token punctuation">;</span></code></pre></div>
<p>to</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">while</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">+=</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> length<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>
  s <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
result <span class="token operator">+=</span> s<span class="token punctuation">;</span></code></pre></div>
<ul>
<li><code class="language-text">(expression->function)</code> replacing an expression with a function or algorithm</li>
<li><code class="language-text">(variable->assignment)</code></li>
</ul>
<h2 id="tolerating-duplication" style="position:relative;"><a href="#tolerating-duplication" aria-label="tolerating duplication permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>tolerating duplication</h2>
<ul>
<li><strong>as tests get more specific, code should become more generic</strong>. Code become more generic by becoming more abstract. One way to make code more abstract is to DRY it out.</li>
<li>DRY is important but if applied too early, and with too much vigour, it can do more harm than good. It’s a good idea to ask the following questions when doing so:
<ul>
<li>Does the change I’m contemplating make the code harder to understand? Be suspicious of any change that muddles the waters?</li>
<li><strong>what is the future cost of doing nothing now?</strong>
<ul>
<li>some changes cost the same regardless of whether you make them now or delay them until later.</li>
<li><strong>if it doesn’t increase your costs, delay making changes</strong></li>
</ul>
</li>
<li>when will the future arrive, or how soon will I get more information?
<ul>
<li>it’s better to tolerate duplication than to anticipate the wrong abstraction</li>
</ul>
</li>
</ul>
</li>
<li>writing shameless green means optimising for understandability, not changeability, and patiently tolerating duplication if doing so will help reveal the underlying abstraction.</li>
</ul>
<h2 id="exposing-responsibilities" style="position:relative;"><a href="#exposing-responsibilities" aria-label="exposing responsibilities permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>exposing responsibilities</h2>
<ul>
<li><strong>duplication is useful when it supplies independent, specific examples of a general concept that you don’t yet understand.</strong></li>
<li>the goal is to use green to maximize your understanding of the problem and to unearth all available information before committing to abstractions.</li>
<li>when the new code muddles rather than clarifies the waters, and it’s important to understand why.</li>
<li>Green Bar patterns:
<ul>
<li>fake it (“Till you make it”)
<ul>
<li>developing habits of writing just enough code to pass the tests forces you to write better tests.</li>
<li>it also provides an antidote for the hubris of thinking you know what’s right when you’re actually wrong.</li>
</ul>
</li>
<li>obvious implementation
<ul>
<li>it’s best to save obvious implementation for very small leaps.</li>
</ul>
</li>
<li>triangulate
<ul>
<li>requires writing several tests at once, which means you’ll have multiple simultaneous broken tests</li>
<li>the idea is to write one bit of code which makes all of the tests pass.</li>
<li>triangulation is meant to force you to converge upon the correct abstraction in your code.</li>
</ul>
</li>
</ul>
</li>
<li>the small steps of TDD act to incrementally review the correct implementation, <strong>skipping these incremental steps means you miss the opportunity of being set right</strong>.</li>
</ul>
<h2 id="choosing-names" style="position:relative;"><a href="#choosing-names" aria-label="choosing names permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>choosing names</h2>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">song</span></span>
  verses<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span>
<span class="token keyword">end</span></code></pre></div>
<ul>
<li>is song method needed?
<ul>
<li>answering this question requires thinking about the problem from the message sender point of view.</li>
<li>knowledge that one object has about another creates a dependency. Dependencies tie objects together, exacerbating the ost of change.</li>
<li>using verses method to request the entire song, however, requires significantly more knowledge. the sender must know
<ul>
<li>the name of hte verses method</li>
<li>that the method requires 2 arguments</li>
<li>that the first argument is the verse on which to start</li>
<li>that the second argument is the verse on which to end</li>
<li>that the song starts on verse 99</li>
<li>that the song ends on verse 0</li>
<li>there are many ways in which the verses method could change that would break senders of this message.</li>
</ul>
</li>
<li>reveal the intention
<ul>
<li>the distinction between intention and implementation … allows you to understand a computation first in essence and later, if necessary, in detail.</li>
<li>song is the intention, <code class="language-text">verses(99,0)</code> is the implementation.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="avoiding-the-echo-chamber" style="position:relative;"><a href="#avoiding-the-echo-chamber" aria-label="avoiding the echo chamber permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>avoiding the echo-chamber</h2>
<ul>
<li>programmers who are hyper-alert to duplication, might be tempted to test <code class="language-text">song</code> like this</li>
</ul>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_the_whole_song</span></span>
  bottles <span class="token operator">=</span> <span class="token class-name">Bottles</span><span class="token punctuation">.</span><span class="token keyword">new</span>
  assert_equal bottles<span class="token punctuation">.</span>verses<span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bottles<span class="token punctuation">.</span>song
<span class="token keyword">end</span></code></pre></div>
<ul>
<li>this test has a major flaw that can cause it toggle from “short and sweet” to “painful and costly” in the blink of an eye. This flaw lies dormant until something changes, so the benefits of writing tests like this accrue to the writer today, while the costs are paid by the unfortunate maintainer in the future.
<ul>
<li>the test is coupled to the implementation details of song such that it will break if the signature or behavior of verses changes, even if song continues to return the correct lyrics</li>
</ul>
</li>
<li>if you change an implementation detail while retaining existing behaviour and are then confronted with a sea of unrelated red tests, you’re right to be exasperated. <strong>This is completely avoidable, and a sign that tests are too tightly coupled to code. Such tests impede change and increase costs</strong></li>
<li>the <code class="language-text">song</code> test should know nothing about how the <code class="language-text">Bottles</code> class produces the song. The clear and unambiguous expectation here is that the song return the complete set of lyrics, and the best way and easiest way to do that is to assert that it does:</li>
</ul>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_the_whole_song</span></span>
  expected <span class="token operator">=</span> <span class="token string-literal heredoc-string"><span class="token delimiter"><span class="token punctuation">&lt;&lt;-</span><span class="token symbol">SONG</span></span><span class="token string">
ALL
# ...
THE
# ...
LYRICS
  </span><span class="token delimiter"><span class="token symbol">SONG</span></span></span>
  bottles <span class="token operator">=</span> <span class="token class-name">Bottles</span><span class="token punctuation">.</span><span class="token keyword">new</span>
  assert_equal expected<span class="token punctuation">,</span> bottles<span class="token punctuation">.</span>song
<span class="token keyword">end</span></code></pre></div>
<ul>
<li>if you find the duplication distressing, consider the alternatives. Your choices are:
<ul>
<li>assert that the expected output matches that of some other method.
<ul>
<li>tests are coupled to the implementation, so these dependencies mean changes to the system under test might break the tests.</li>
</ul>
</li>
<li>assert that the expected output matches a dynamically generated string.
<ul>
<li>reducing string duplication inside the test would require logic. Regardless of how you do it, any logic here would bind the tests to implementation details and any change to the system under test might break the test.</li>
</ul>
</li>
<li>assert that the expected output matches a hard-coded string.
<ul>
<li>not only is the expected output clearly and unambiguously stated, but the test has no dependencies.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="writing-cost-effective-tests" style="position:relative;"><a href="#writing-cost-effective-tests" aria-label="writing cost effective tests permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>writing cost-effective tests</h2>
<h3 id="intentional-testing" style="position:relative;"><a href="#intentional-testing" aria-label="intentional testing permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>intentional testing</h3>
<h4 id="test-benefits" style="position:relative;"><a href="#test-benefits" aria-label="test benefits permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>test benefits</h4>
<ul>
<li>finding bugs</li>
<li>supplying documentation
<ul>
<li>write tests that remind you the story you once have</li>
</ul>
</li>
<li>deferring design decisions
<ul>
<li>intentionally depending on interfaces allows you to use tests to put off design decision safely and without penalty</li>
</ul>
</li>
<li>supporting abstractions
<ul>
<li>tests are your record of the interface of every abstraction. They let you put off design decisions and create abstractions to any useful depth.</li>
</ul>
</li>
<li>exposing design flaws
<ul>
<li>if a test requires painful setup, the code expects too much context.</li>
<li>if the test is hard to write, other objects will find the code difficult to reuse.</li>
</ul>
</li>
<li>good tests not only tell a story, but they lead, step by step, to a well-organised solution.</li>
<li><strong>test are not a place for abstractions, they are the place for concretions. Abstractions belong to the code</strong>.</li>
</ul>
<h4 id="knowing-what-to-test" style="position:relative;"><a href="#knowing-what-to-test" aria-label="knowing what to test permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>knowing what to test</h4>
<ul>
<li>dealing with objects as if they are only and exactly the messages to which they respond lets you design a changeable application, and it is your understanding of the importance of this perspective that allows you to create tests that provide maximum benefit at minimum cost.</li>
<li>tests should concentrate on the incoming or outgoing messages that cross an object’s boundaries. The incoming messages make up the public interface of hte receiving object. The outgoing messages, by definition, are incoming into other objects and so ar part of some other object’s interface.</li>
<li>the general rule is that objects should make assertions about state only for messages in their own public interfaces.</li>
<li>some outgoing messages have no side effects and thus matter only to their senders.
<ul>
<li>outgoing messages like this are known as queries and they need not be tested by the sending object.</li>
<li>query messages are part of the public interface of their receiver, which already implements every necessary test of state.</li>
</ul>
</li>
<li>many outgoing messages do have side effects (a file gets written, a database record is saved, an action is taken by an observer) upon which your application depends.
<ul>
<li>proving that a message gets sent is a test of behavior, not state, and involves assertions about the number of times, and with what arguments, the message is sent.</li>
</ul>
</li>
<li>incoming messages should be tested for the state they return.</li>
</ul>
<h4 id="knowing-when-to-test" style="position:relative;"><a href="#knowing-when-to-test" aria-label="knowing when to test permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>knowing when to test</h4>
<ul>
<li>you should write tests first, whenever it makes sense to do so</li>
</ul>
<h4 id="knowing-how-to-test" style="position:relative;"><a href="#knowing-how-to-test" aria-label="knowing how to test permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>knowing how to test</h4>
<ul>
<li>if you understand the costs and benefits, feel free to choose any framework that suits you.</li>
<li>BDD takes an outside-in approach, creating objects at the boundary of an application and working its way inward, mocking as necessary to supply as-yet-unwritten objects.</li>
<li>TDD takes an inside-out approach, usually staring with tests of domain objects and then reusing these newly created domain objects in the tests of adjacent layers of code.</li>
<li>when you tests know more about the internal inside of the object under test, it allows knowledge that should be private eto the object leak into the tests, increasing coupling between them and raising the likelihood that changes the code will require changes in tests.</li>
</ul>
<h3 id="testing-incoming-messages" style="position:relative;"><a href="#testing-incoming-messages" aria-label="testing incoming messages permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>testing incoming messages</h3>
<ul>
<li>incoming messages make up an object’s public interface, the face it presents to the world. these messages need tests because other application objects depend on their signatures and on the results they return.</li>
</ul>
<h4 id="deleting-unused-interfaces" style="position:relative;"><a href="#deleting-unused-interfaces" aria-label="deleting unused interfaces permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>deleting unused interfaces</h4>
<ul>
<li>incoming messages ought to have dependents. Some object other than the original implementer depends on each of these messages.</li>
<li>do not test an incoming messages that has no dependents; delete it.</li>
<li>unused code costs more to keep than to recover.</li>
</ul>
<h4 id="providing-the-public-interface" style="position:relative;"><a href="#providing-the-public-interface" aria-label="providing the public interface permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>providing the public interface</h4>
<ul>
<li>if Wheels are expensive to create, the Gear test pays that cost even though it has no interests in Wheel.</li>
<li>an application constructed of tightly coupled, dependent laden objects is like a tapestry where pulling on one thread drags the entire rug along.
<ul>
<li>running Gear test would then create a large network of objects, any of which might break in a maddeningly confusing way.</li>
</ul>
</li>
<li>tests are the first reuse of code.</li>
</ul>
<h4 id="isolating-the-object-under-test" style="position:relative;"><a href="#isolating-the-object-under-test" aria-label="isolating the object under test permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>isolating the object under test</h4>
<ul>
<li>when you can’t test object in isolation, it bodes ill for the future.</li>
<li>the diameter method is part of hte public interface of a role, one that might reasonably be named diameterizable.</li>
<li>thinking of the injected object as a instance of its role gives you more choices about what kind of Diameterizable to inject into Gear during your tests.</li>
</ul>
<h4 id="injecting-dependencies-using-classes" style="position:relative;"><a href="#injecting-dependencies-using-classes" aria-label="injecting dependencies using classes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>injecting dependencies using classes</h4>
<ul>
<li>when the code in your test uses the same collaborating objects as the code in your application, your tests always break when they should.</li>
</ul>
<h4 id="injecting-dependencies-as-roles" style="position:relative;"><a href="#injecting-dependencies-as-roles" aria-label="injecting dependencies as roles permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>injecting dependencies as roles</h4>
<ul>
<li><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/2ac7989d53d7f40696df33ffd359559a/50383/behaves-like-inject-into.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 62.65822784810127%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVR42pWSW4+CMBCF+/9/ng88IAmCglG5CALKdTbfJGVZFZJtMum0PT09c6ZGvoxpmmRrbJ2bNfAwDFJV1Ud0XbdJapZENhhcjKJIDoeDHI9H8X1fwjCU5/P5gV+SG7v4RmhV3u93eTweMo6jvF6vVUJmsyYfIkhOp5N4nidBEMxlb/k6K7zdblpSmqaqLMsyLQ9VBHtt2+ojqKzrWpWD6/v+V6ElBLjb7eRyuaiKrU6CBQceEX8Il0BeLMtSvjXq3a+maVTde9kG83kRVZAtDV6bbV4UheR5ruS2WQYyx3HEdd3ZcDxbU7ckpFSatt/vlVwJucwBhpP/d1AhdwklRDLfIo5jSZJErternM9nzTGe7hN0nz1ysKyZWbPPL1BCaueQb8A3YaZ0O+MPYc/ILRa7yAlb3Q/xG/d1qjaNOgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="injecting roles"
        title=""
        src="/static/2ac7989d53d7f40696df33ffd359559a/f058b/behaves-like-inject-into.png"
        srcset="/static/2ac7989d53d7f40696df33ffd359559a/c26ae/behaves-like-inject-into.png 158w,
/static/2ac7989d53d7f40696df33ffd359559a/6bdcf/behaves-like-inject-into.png 315w,
/static/2ac7989d53d7f40696df33ffd359559a/f058b/behaves-like-inject-into.png 630w,
/static/2ac7989d53d7f40696df33ffd359559a/50383/behaves-like-inject-into.png 740w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></li>
<li>the whole point of dependency injection is that it allows you to substitute different concrete classes without changing existing code.</li>
<li>Object-oriented design tells you to inject dependencies because it believes that specific concrete classes will vary more than these roles, or conversely, roles will be more stable than the classes from which they were abstracted.</li>
<li>if your application contains many different diameterizables, you might want to create an idealized one so your tests clearly convey the idea of this role.
<ul>
<li>if all diameterizables are expensive, you may want to fake a cheap one to make your tests run faster.</li>
<li>if you are doing BDD, your application might not yet contain any object that plays this role; you may be forced to manufacture something just to write the test.</li>
</ul>
</li>
</ul>
<h3 id="creating-test-double" style="position:relative;"><a href="#creating-test-double" aria-label="creating test double permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>creating test double</h3>
<ul>
<li><a href="../growing-object-orented-guided-by-tests-summary/index.md#mock-roles-not-objects">more on test doubles</a></li>
<li>when diameterizable’s interface changes from diameter to width, and <code class="language-text">Wheel</code> get updated but <code class="language-text">Gear</code> does not
<ul>
<li>since the dimeterizabledouble is injected, the test continues to pass even though the application is definitely broken</li>
<li>this is where the stubbing and mocking could make the tests brittle.</li>
<li>“when interface of a role changes, all players of the role must adopt the new interface”, dynamic language like ruby doesn’t complain about the incompatible implementation with the interface.</li>
</ul>
</li>
</ul>
<h3 id="using-tests-to-document-roles" style="position:relative;"><a href="#using-tests-to-document-roles" aria-label="using tests to document roles permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>using tests to document roles</h3>
<ul>
<li>injecting the same objects at test time as are used at runtime ensures that tests break correctly but may lead to long running tests.</li>
<li>injecting doubles can speed tests but leaves them vulnerable to constructing a fantasy world where tests work but the application fails</li>
</ul>
<h3 id="testing-private-methods" style="position:relative;"><a href="#testing-private-methods" aria-label="testing private methods permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>testing private methods</h3>
<ul>
<li>if you can’t get/access the structure you need, then the tests tell you that it’s time to break up the class into more minor/composable features.
<ul>
<li>the extracted methods form the core of responsibilities of the new object and so make up its public interface, which is (theoretically) stable and thus safe to depend upon.</li>
</ul>
</li>
<li>tests of private methods are therefore coupled to application code that is likely to change.</li>
<li>since tests provide documentation about the object under test, it could mislead others into using them.</li>
<li>never write private methods, and if you do, never ever test them, unless of course it makes sense to do so</li>
</ul>
<h3 id="testing-outgoing-messages" style="position:relative;"><a href="#testing-outgoing-messages" aria-label="testing outgoing messages permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>testing outgoing messages</h3>
<ul>
<li>outgoing messages are either queries or commands. Query messages matter only to the object that sends them, while command messages have effects that are visible to other objects in your application.</li>
<li>ignoring query messages
<ul>
<li>it’s redundant for Gear to duplicate correctness tests from Wheel, maintainance costs will increase if it does.</li>
</ul>
</li>
<li>proving command messages
<ul>
<li>sometimes, it does matter that the message get sent and the object under test is responsible for sending the message</li>
<li>your tests must prove that the command messages got sent</li>
</ul>
</li>
<li>if you have proactively injected dependencies, you can easily substitute mocks. Setting expectations on these mocks allows you to prove that the object under test fulfills its responsibilities without duplicating assertions that belong else where</li>
</ul>
<h3 id="testing-duck-types" style="position:relative;"><a href="#testing-duck-types" aria-label="testing duck types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>testing duck types</h3>
<ul>
<li>Using role tests to validate doubles
<ul>
<li>use dynamic module interface test to ensure the test double honor the interface</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">module</span> <span class="token class-name">DiameterizableInterfaeTest</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_implements_the_diameterizable_interface</span></span>
    assert_respond_to<span class="token punctuation">(</span><span class="token variable">@wheel</span><span class="token punctuation">,</span> <span class="token symbol">:diameter</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
<span class="token keyword">class</span> <span class="token class-name">DiameterDoubleTest</span> <span class="token operator">&lt;</span> MiniTest<span class="token double-colon punctuation">::</span>Unit<span class="token double-colon punctuation">::</span>TestCase
  <span class="token keyword">include</span> DiameterizableInterfaceTest</code></pre></div>
<ul>
<li>From the point of view of the object under test, every other object is a role, and dealing with objects as if they representative of the roles they play loosens coupling and increases flexibility, both in your application and in your tests.</li>
<li>If you fear that human communication will be insufficient to keep all players of a role in sync, write the tests.</li>
</ul>
<h3 id="testing-inherited-code" style="position:relative;"><a href="#testing-inherited-code" aria-label="testing inherited code permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>testing inherited code</h3>
<ul>
<li>prove that all objects in this hierarchy honor their contract
<ul>
<li>subtypes should be substitutable for their subtypes</li>
<li>write a shared test for the common contract and include this test in every object.</li>
</ul>
</li>
<li>confirming subclass behavior</li>
<li>confirming superclass enforcement
<ul>
<li><code class="language-text">bicycle</code> class should raise an error if a subclass does not implement <code class="language-text">default_tire_size</code>. Even though this requirement applies to subclasses, the actual enforcement behavior is in Bicycle.</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">test_forces_subclasses_to_implement_default_tire_size</span></span>
  assert_raises<span class="token punctuation">(</span>NotImplementedError<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token variable">@bike</span><span class="token punctuation">.</span>default_tire_size <span class="token punctuation">}</span></code></pre></div>
<ul>
<li>
<p>testing concrete subclass behavior</p>
<ul>
<li>it’s important to test these specializations without embedding knowledge of the superclass into the test.
<ul>
<li>the <code class="language-text">RoadBikeTest</code> should ensure that <code class="language-text">local_spares</code> works while maintaining deliberate ignorance about the existance of <code class="language-text">spares</code> method</li>
</ul>
</li>
</ul>
</li>
<li>
<p>testing abstract super class behavior</p>
<ul>
<li>you can stub the behavior that would normally be supplied by subclasses (follow liskov substitution principle)</li>
<li>be especially careful when testing subclass specializations to prevent knowledge of the superclass from leaking down into the subclass’s test</li>
</ul>
</li>
</ul>
<h1 id="unearthing-concepts" style="position:relative;"><a href="#unearthing-concepts" aria-label="unearthing concepts permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>unearthing concepts</h1>
<h2 id="listening-to-change" style="position:relative;"><a href="#listening-to-change" aria-label="listening to change permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>listening to change</h2>
<ul>
<li>if the problem is solved, and you choose to refactor now rather than later, you pay the opportunity cost of not being able to work on other problems
<ul>
<li><strong>spending time “improving” code based purely on aesthetics may not be the best use of your precious time.</strong></li>
</ul>
</li>
<li>the need for change imposes higher standards on the affected code. <strong>Code that never changes obviously doesn’t need to be changable, but once a new requirement arrives, the bar is raised</strong>.</li>
</ul>
<h2 id="starting-with-the-openclose-principle" style="position:relative;"><a href="#starting-with-the-openclose-principle" aria-label="starting with the openclose principle permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>starting with the open/close principle</h2>
<ul>
<li><strong>code is open to a new requirement when you can meet the new requirement without changing the existing code.</strong></li>
<li><strong>when faced with a new requirement, first rearrange the existing code such that it’s open to the new feature, and once that’s complete, then add the new code</strong></li>
<li><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/beb634152ef3ea46417aff0098c3a968/dc333/open-closed-flowchart.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 100.63291139240506%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIUlEQVR42p1Ui27aQBDk/78qPCISpNgOpQKbUkN42fiBwS/AwFSz1bmWA0malU5n8O7czOz6GtfrFWoxHMfBcrlENdT7y+Uiv/M8lzzP82RtNhv4vi/vG9VCvkySBMfjUZKiKJLnejAnDEOcz2cURSFABEzTFI3D4YDVaoXhcCinEmixWMje7XZhmibW67Wwnk6nkmsYBtI0weDHKzqdRzhrF3G8/wvIYqITgEXb7VaYspBMGGTBxUMpnbksjqIQ5shEluXY7XaS3yCr0+kkhfv9XsDjJBG59VDesnA2m4lsEvB9T1TRngblULYKJhm6Vh5SbRoB6ZdqED1USzX1HSBPN0cjSaoH1XwUBH0HOJ/PMf41lmfFglbQIzaIVsRxXDKqKhBAnsq5YtAPSlZeMugLc7gTjLmu65YNU8AqhCH9Ytc4AobxCl3X0G630ev1oGuagPueJyy5FMu7gBwJsrMsC/1+Hy/aC8aWJXM3mUzguo50kTvzPwVUHjJx9vYmcxYE/ySzu3meiRVUwpoPJVebQnk/BwMUp6IcagJxkRV3gqnv+lPA/JDDMs2b3/CtMalHCaheUrb6ItQs1kejejvdZMjCIAiku81mE61WC7puCPC9wnshlwN94YUwtkbodp9g6Dp+27b8V2X5JUAOKlnati3SOTbPzz1kWfY9QPUQhCGmUxsPD008djrSGI7PfwOqRDIiAO9BddFWZ+2rgH8A2Y8EXTiNaxgAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="open closed flowchart"
        title=""
        src="/static/beb634152ef3ea46417aff0098c3a968/f058b/open-closed-flowchart.png"
        srcset="/static/beb634152ef3ea46417aff0098c3a968/c26ae/open-closed-flowchart.png 158w,
/static/beb634152ef3ea46417aff0098c3a968/6bdcf/open-closed-flowchart.png 315w,
/static/beb634152ef3ea46417aff0098c3a968/f058b/open-closed-flowchart.png 630w,
/static/beb634152ef3ea46417aff0098c3a968/dc333/open-closed-flowchart.png 938w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></li>
<li>the trick to successfully improving code that contains many flaws is to isolate and correct them one at a time</li>
<li>if you are unclear about how to make it open, the way forward is to start removing code smells</li>
<li>you should never change tests during a refactoring, if your tests are flawed such that they interfere with refactoring, improve them first, and then refactor</li>
</ul>
<h2 id="follow-the-flocking-rules" style="position:relative;"><a href="#follow-the-flocking-rules" aria-label="follow the flocking rules permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>follow the flocking rules</h2>
<ul>
<li>rules
<ul>
<li>select the things that are most alike</li>
<li>find the smallest difference between them</li>
<li>make the simplest change that will remove that difference.</li>
</ul>
</li>
<li>as you follow the flocking rules
<ul>
<li>change only 1 line at a time</li>
<li>run the tests after every change</li>
<li>if the tests fail, undo and make a better change.</li>
</ul>
</li>
<li>changes to code can be subdivided into 4 distinct steps
<ul>
<li>parse the new code: confirm the syntax is valid</li>
<li>parse/execute step: proving that code runs without blowing up</li>
<li>parse/execute and use its result: ensure that it returns the correct result</li>
<li>delete unused code</li>
</ul>
</li>
<li>why <code class="language-text">Flocking</code>?
<ul>
<li>the group’s behavior is the result of a continuous series of small decisions being made by each participating individual. These decisions are guided by three simple rules
<ul>
<li>alignment - steer towards the average heading of neighbors</li>
<li>separation - don’t get too close to a neighbor</li>
<li>cohesion - steer towards the average position of the flock.</li>
</ul>
</li>
<li>the “flocking rules” for code allow abstractions to appear.</li>
</ul>
</li>
<li>making existing code open to a new requirement often requires identifying and naming abstractions. The flocking rules concentrate on turning difference into sameness, and thus are useful tools for unearthing abstractions.</li>
</ul>
<h2 id="converging-on-abstractions" style="position:relative;"><a href="#converging-on-abstractions" aria-label="converging on abstractions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>converging on abstractions</h2>
<ul>
<li>focusing on difference
<ul>
<li>DRYing out sameness has some value, but DRYing out difference has more.</li>
<li>encapsulating the concept that varies, a theme of many design patterns.</li>
<li>difference holds the key to understanding. If 2 concrete examples represent the same abstraction and they contain a difference, that difference must represent a smaller abstraction with a larger one. if you can name the difference, you’ve identified that smaller abstraction.</li>
</ul>
</li>
<li>simplifying a hard problem
<ul>
<li>many programmers gravitate towards starting a problem at its most confusing part.</li>
<li>solving easy problems, through a magical alchemy of code, sometimes transmutes hard problems into easy ones. It is common to find that hard problems are hard only because the easy ones have not yet been solved.</li>
</ul>
</li>
<li>naming concepts
<ul>
<li>general rule and new requirement can help in the struggle for a name.</li>
<li>the name you choose will be the name you use in conversations with your customers. Naming things after domain concepts improves communication between you and the folks who pay the bills. Only good can come of this.</li>
<li>notice the following difference</li>
</ul>
</li>
</ul>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token command-literal"><span class="token command string">`${number -1} bottle of bear on the wall.\n`</span></span>
<span class="token command-literal"><span class="token command string">`${number -1} bottles of beer on the wall.\n`</span></span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">- what the words "bottle" and "bottles" represent in the context of the song?
  - within the context of song, "bottle/bottles" does not represent pluralization.
  - the new requirement involve with the need to say "six pack" instead of "bottle/bottles". The string "six pack" is one more concrete example of the underlying abstraction.
  - the general rule is that the name of a thing should be one level of abstraction higher than the thing itself. The strings "bottle/bottles/six-pack" are instances of some category, and the task is to name that category using language of the domain
  - one way to identify category is to imagine the concrete examples as rows and columns in a spreadsheet
  - the header "number" is a level of abstract higher than the concrete examples. "1", "6", and "n" are numbers
  - container is meaningful, understandable and unambiguous.</code></pre></div>
<table>
<thead>
<tr>
<th>Number</th>
<th>xxx?</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>bottle</td>
</tr>
<tr>
<td>6</td>
<td>six-pack</td>
</tr>
<tr>
<td>n</td>
<td>bottles</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#follow-the-flocking-rules">follow the flock rule</a> example
<ul>
<li>add new container method with 1 line return <code class="language-text">bottles</code></li>
<li>replace the first client code to use <code class="language-text">container()</code> method instead of <code class="language-text">bottles</code></li>
<li>add parameter argument <code class="language-text">number</code></li>
<li>expand the code in <code class="language-text">container</code> to use <code class="language-text">number</code> to decide which of <code class="language-text">bottle</code> or <code class="language-text">bottles</code> to return
<ul>
<li>could be expressed in ternary form as <code class="language-text">number === 1? "bottle": "bottles" </code></li>
</ul>
</li>
<li>change other references to use <code class="language-text">container</code> method</li>
</ul>
</li>
</ul>
<h2 id="creating-classes-with-single-responsibility" style="position:relative;"><a href="#creating-classes-with-single-responsibility" aria-label="creating classes with single responsibility permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>creating classes with single responsibility</h2>
<ul>
<li>a class <strong>must have data and behavior (methods)</strong>. If one of these is missing, the code doesn’t belong to a class.</li>
</ul>
<h3 id="determining-if-a-class-has-a-single-responsibility" style="position:relative;"><a href="#determining-if-a-class-has-a-single-responsibility" aria-label="determining if a class has a single responsibility permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>determining if a class has a single responsibility</h3>
<ul>
<li>rephrase every one of its methods as a question, asking the question ought to make sense.
<ul>
<li>“Please Mr. Gear, what is your ratio?” - makes sense</li>
<li>‘Please Mr. Gear, what is your tire size?” - Doesn’t make sense = does not belong here</li>
</ul>
</li>
<li>describe the class in 1 sentence.
<ul>
<li>class should do the smallest possible useful thing</li>
<li>when the description contains the words “and” or “or”, it means that the class has more than one responsibility
<ul>
<li>Gear’s responsibility: “calculate the effect that a gear has on a bicycle”</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="writing-code-that-embraces-change" style="position:relative;"><a href="#writing-code-that-embraces-change" aria-label="writing code that embraces change permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>writing code that embraces change</h3>
<ul>
<li><strong>depend on behavior (methods), not data</strong>
<ul>
<li>never call @variables inside methods, use wrapper methods instead
<ul>
<li><a href="https://github.com/serodriguez68/poodr-notes/blob/master/code_examples/chapter_2.rb#L61-**L71**">wrong code example</a></li>
<li><a href="https://github.com/serodriguez68/poodr-notes/blob/master/code_examples/chapter_2.rb#L73-L102">right code example</a></li>
</ul>
</li>
<li>data very often has behavior that you don’t yet know about.</li>
</ul>
</li>
<li><strong>hide data structures</strong>
<ul>
<li>if the class uses complex data structures, write wrapper methods that decipher the structure and depend on those methods
<ul>
<li><a href="https://github.com/serodriguez68/poodr-notes/blob/master/code_examples/chapter_2.rb#L105-L117">wrong code example</a></li>
<li><a href="https://github.com/serodriguez68/poodr-notes/blob/master/code_examples/chapter_2.rb#L124-L141">right code example</a></li>
</ul>
</li>
<li>it trades indexing into a structure for sending messages to an object. The <code class="language-text">wheelify</code> method above isolates the messy structural information and DRYs out the code</li>
</ul>
</li>
</ul>
<h3 id="enforce-single-responsibility-everywhere" style="position:relative;"><a href="#enforce-single-responsibility-everywhere" aria-label="enforce single responsibility everywhere permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>enforce single responsibility everywhere</h3>
<ul>
<li>extract extra responsibilities from methods
<ul>
<li>methods with single responsibility have these benefits
<ul>
<li>clarify what hte class does</li>
<li>avoid the need for comments</li>
<li>encourage reuse</li>
<li>easy to move to another class</li>
</ul>
</li>
<li>ask questions about what they do and try to describe their responsibilities in a single sentence.</li>
<li>separating iteration from the action that’s being performed on each element (common case of single responsibility in methods)</li>
<li>don’t decide; preserve your ability to make a decision later.</li>
<li>concentrate on the primary class. Decide on its responsibilities and enforce your decision fiercely. If you identify extra responsibilities that you cannot yet remove, isolate them. Do not allow extraneous responsibilities to leak into your class
<ul>
<li><a href="https://github.com/serodriguez68/poodr-notes/blob/master/code_examples/chapter_2.rb#L176-L197">example using struct</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="creating-flexible-interfaces" style="position:relative;"><a href="#creating-flexible-interfaces" aria-label="creating flexible interfaces permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>creating flexible interfaces</h2>
<ul>
<li><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/dc6f4e42cd7437a484673dbb5f28c943/5d72a/communication-patterns-bad-vs-good.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 37.34177215189873%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABLklEQVR42mWR2W7CMBBF+f/PqlSpL5UoLYQ1juPEQCEOgUA2J6dKQlnESGM/zPXRveMBgDEGKSU69Am1xvcVSimqqmrHNE3TdVtRFBEEqmtXSHwV4HkeeZ5388H/g7KyqM2Jychnvtp1w7pubsD73ZCkBcOhj+OsCXfpk3ZwE1uL8zGjCDc0l6xV0LzA+qoayI9nTiYlK+tnYHvkhSXTW4gjYm/N5/carhEeYWVVI6ShOF1QKmYy1oTKPOk64NyLCX4Es3GI9+VS/EZwTBCzNYW9O8tLy8IzFCZh5fZrocipjimhTp4jH7cxZi47ULxULCYhS//QQR5djqY7TvsEbNm7PmcIsccRvdNBfRVKFfP27qKXmss5R0eXl8ittrQ1U2FYybj/9UPGZBXd9vgH/IUaQ/x9eIIAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="bad vs good interface"
        title=""
        src="/static/dc6f4e42cd7437a484673dbb5f28c943/f058b/communication-patterns-bad-vs-good.png"
        srcset="/static/dc6f4e42cd7437a484673dbb5f28c943/c26ae/communication-patterns-bad-vs-good.png 158w,
/static/dc6f4e42cd7437a484673dbb5f28c943/6bdcf/communication-patterns-bad-vs-good.png 315w,
/static/dc6f4e42cd7437a484673dbb5f28c943/f058b/communication-patterns-bad-vs-good.png 630w,
/static/dc6f4e42cd7437a484673dbb5f28c943/5d72a/communication-patterns-bad-vs-good.png 834w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></li>
<li>good public interface structure
<ul>
<li>objects reveals as little of themselves as possible</li>
<li>objects know as little of their neighbors as possible</li>
<li>Result: plugable, component-like objects</li>
<li>reveals the class’s primary responsibility
<ul>
<li>the public interface should correspond to the class’s responsibility. A single responsibility may require multiple public methods. However, too many loosely related public methods can be a sign of single responsibility violation</li>
</ul>
</li>
<li>are expected to be invoked by others</li>
<li>will not change on a whim</li>
<li>are safe for other to depend on, since it is less changable</li>
<li>are thoroughly documented in tests</li>
</ul>
</li>
</ul>
<h3 id="find-good-public-interface" style="position:relative;"><a href="#find-good-public-interface" aria-label="find good public interface permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>find good public interface</h3>
<ul>
<li>
<p><strong>focus on messages, not domain objects (classes)</strong></p>
</li>
<li>
<p>you don’t send messages because you have objects, you have objects because you send message.</p>
<ul>
<li>design experts notice domain objects without concentrating on them; they focus not on these objects but on the messages that pass between them. These messages are guides that lead you to discover other objects, ones that are just as necessary but far less obvious.</li>
</ul>
</li>
<li>
<p><strong>Step 1: Using sequence diagram</strong></p>
<ul>
<li>lightweight way of acquiring a design intention about an interaction. It provides a simple way to experiment with different object arrangements and message passing schemes between objects. It brings clarity to your thoughts and provide a vehicle to collaborate and communicate with others.</li>
<li><strong>should this receiver be responsible for responding to this message</strong></li>
<li><strong>I need to send this message, who should respond to it.</strong></li>
</ul>
</li>
<li>
<p><strong>Step 2: asking for “what” instead of telling “how”</strong></p>
<ul>
<li><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/060cae03cbf2f83b6cabe209a2188313/e2e58/novice-vs-intermediate-experienced.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiElEQVR42nWT147CQAxF8/+fhsQLEgJCCaRTkhA6pNzV8WpW4WEtjYZ4XI4LniSVZak4jpVlmdq2RaW+7+0+Ho+Kokhpmmq/35vevd1uN+12O/PD//1+yyPA+Xw2g6qq7AwD1nVtSbquM8emaeSkKku9Xi+1TWNvj8dD3v1+V5Ik9oDT0OHz+SiOIl2vV/uGYEiInkDbINDhcDC9EVIKyNC5khESlEWhxWKhcBfqcrl80UNEUqAIzO3x8Hw+LWhRFH+Ezsk5kixL0y89wWjXPs/lL3xL6Dl0CE+n0xehc2qb1gLRs2HJEAFjlZSV2XpuWnmeWyb65KgxJCuE6OknTq6f9fl3YH3XKYmT36EwDEq19SkKWyE33e12a+SsTRAEtjpO0E0mEy2XS7OhZbTLYzrT6VSz2Uyr1coeoINsvV4rDEM7BOBQptvd0Wik8XhsfrTLCIkKDQvMPRyK7/uaz+cWGEJo+MYOYbKbzcYS8ZsBefpHCExm/gmUBCUt4KZNzoZecmzB21Y/jWRKx/3QPDIAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="compare-designers"
        title=""
        src="/static/060cae03cbf2f83b6cabe209a2188313/f058b/novice-vs-intermediate-experienced.png"
        srcset="/static/060cae03cbf2f83b6cabe209a2188313/c26ae/novice-vs-intermediate-experienced.png 158w,
/static/060cae03cbf2f83b6cabe209a2188313/6bdcf/novice-vs-intermediate-experienced.png 315w,
/static/060cae03cbf2f83b6cabe209a2188313/f058b/novice-vs-intermediate-experienced.png 630w,
/static/060cae03cbf2f83b6cabe209a2188313/40601/novice-vs-intermediate-experienced.png 945w,
/static/060cae03cbf2f83b6cabe209a2188313/e2e58/novice-vs-intermediate-experienced.png 1069w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></li>
</ul>
</li>
<li>
<p><strong>Step 3: seeking for context independence</strong></p>
<ul>
<li>use <a href="./../growing-object-orented-guided-by-tests-summary/index.md#dependency-injection">dependency injection</a> to seek context independent</li>
</ul>
</li>
<li>
<p><strong>Step 4: trusting other objects</strong></p>
<ul>
<li>I know what I want, I trust you to do your part</li>
</ul>
</li>
<li>
<p><strong>use messages to discover objects</strong></p>
<ul>
<li><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/505b811edbac0792a7d939d4ca0dbc75/59000/discovering-objects.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqUlEQVR42m1T2Y6CQBDk/3/MtzVoFBWQU0BBkGtABGtTbcaHzXYymYOeOroHQymF4/EIz/Ow3+/RNA0Y7/cbvu/DdV3sdjvEcYx5nrEsC6ZpQhRFcs572+0WVVnKd4MfHdtGUze4Zhkej4cADsMgYG3boihyOI6Dqqrwmia4jiN5WZoKAXN8z8PlcoFBJbfbDeufNfK8EGUcDBKYpgm6eL1eooDBi6vVCnVdy16rFoWiRikcDgcB1EGF9/tdRtt2ckkTkYBqaZNqu677CjHey4I4itD3PZIk+bL2XYcgCGDtLfRd/1Wi68vI8xu88xllWYlCASyKQmr4qVXxbQqD68APMI6jEGrLnMuyFLDr9QqlBjkTwDRNBYiDa1plPJ9PKTTtpEmC0/EkSjQgI/A9bExTckjKOhvagrbBQ6plAkkGNcietdRkzFnmRWrI0nBPUNo2NJgGpDK+S1piEkGzLJNGMMZxQBiEqB+1OOI95vLNZmn2UfhXZRiGsCwLtm3LTIJPt1vpLl8Eifh8OLO+HKpX/wPyr9hsNtJlrtl9XWva4oMniZ7pRMcvNQFGc2gQar4AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="discovering objects"
        title=""
        src="/static/505b811edbac0792a7d939d4ca0dbc75/f058b/discovering-objects.png"
        srcset="/static/505b811edbac0792a7d939d4ca0dbc75/c26ae/discovering-objects.png 158w,
/static/505b811edbac0792a7d939d4ca0dbc75/6bdcf/discovering-objects.png 315w,
/static/505b811edbac0792a7d939d4ca0dbc75/f058b/discovering-objects.png 630w,
/static/505b811edbac0792a7d939d4ca0dbc75/59000/discovering-objects.png 917w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></li>
<li>it’s completely reasonable that <code class="language-text">Customer</code> would send <code class="language-text">suitable_trips</code> message. It is exactly what <code class="language-text">Customer</code> wants. The problem is not with the sender, it is with the receiver. You have not yet identified an object whose responsibility it is to implement this method</li>
<li>sequence diagram keep the focus on messages and allow you to form a rational intention about the first thing to assert in a test. Switching your attention from objects to messages allows you to concentrate on designing an application built upon public interfaces</li>
</ul>
</li>
</ul>
<h3 id="create-explicit-interfaces" style="position:relative;"><a href="#create-explicit-interfaces" aria-label="create explicit interfaces permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>create explicit interfaces</h3>
<ul>
<li>method in the public interface should
<ul>
<li>be explicitly identified as such</li>
<li>be more about what than how</li>
<li>have names that, so far as you can anticipate, will not change.</li>
<li>take a hash as an options parameter.</li>
</ul>
</li>
<li>create test for public interfaces.
<ul>
<li>do not test private methods. If you must, segregate those test from the ones of the public methods</li>
</ul>
</li>
</ul>
<h3 id="honor-the-public-interfaces-of-others" style="position:relative;"><a href="#honor-the-public-interfaces-of-others" aria-label="honor the public interfaces of others permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>honor the public interfaces of others</h3>
<ul>
<li>if your design forces the use of a private method in another class, re-think your design</li>
<li>a dependency on a private method of an external framework is a form of technical debt</li>
</ul>
<h3 id="exercise-caution-when-depending-on-private-interfaces" style="position:relative;"><a href="#exercise-caution-when-depending-on-private-interfaces" aria-label="exercise caution when depending on private interfaces permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>exercise caution when depending on private interfaces</h3>
<ul>
<li>if you must depend on private interface, use <a href="../manage-dependencies/index.md#isolate-the-dependency">isolate the dependency</a>
<ul>
<li>this prevent calls from multiple places</li>
</ul>
</li>
</ul>
<h3 id="minimize-context" style="position:relative;"><a href="#minimize-context" aria-label="minimize context permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>minimize context</h3>
<ul>
<li>create public methods that allow senders to get what they want without knowing how your class does it</li>
<li>if you fae a class with an ill-defined public interface you have these options
<ul>
<li>define a new well-defined method for that class’ public interface.</li>
<li>create a wrapper class with a well defined public interface</li>
<li>create a single wrapping method and put it in your own class</li>
</ul>
</li>
</ul>
<h3 id="the-law-of-demeter" style="position:relative;"><a href="#the-law-of-demeter" aria-label="the law of demeter permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="../growing-object-orented-guided-by-tests-summary/index.md#tell-dont-ask---law-of-demeter">the law of demeter</a></h3>
<ul>
<li>this is covered as a <a href="(../growing-object-orented-guided-by-tests-summary/index.md#tell-dont-ask---law-of-demeter)">tell don’t ask</a> from growing object oriented objects guided by tests</li>
</ul>
<h1 id="practising-refactoring-horizontally" style="position:relative;"><a href="#practising-refactoring-horizontally" aria-label="practising refactoring horizontally permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>practising refactoring horizontally</h1>
<ul>
<li>if you simultaneously change many things and something breaks, you’re forced to understand everything in order to fix anything.</li>
<li>making a slew of simultaneous changes is not refactoring - it’s rehacktoring.</li>
<li>gradual cutover refactoring
<ul>
<li>a strategy for keeping the code in a releasable state by gradually switching over a small number of pieces at a time. This type of refactoring can be done alongside other development work without affecting the release schedule.</li>
<li>let red be your guide. If you take a giant step and the tests begin to fail, undo and fall back to making smaller changes.</li>
</ul>
</li>
<li>real refactoring is comfortingly predictable, and saves brainpower for more thought provoking challenges.</li>
<li>if the non-default branch is implemented first, the default has to be set to something that actually meets the condition and so makes the <code class="language-text">true</code> branch execute.
<ul>
<li>Therefore, implementing the non-default branch first places a slightly greater burden on you.</li>
</ul>
</li>
<li>seeking stable landing points
<ul>
<li>code is read many more times than it is written, so anything that increases understandability lowers costs. Next, and just as important, consistent code enables future refactorings.</li>
</ul>
</li>
<li>taking bigger steps
<ul>
<li>if you take bigger steps and the tests begin to fail, there’s something about the problem that you don’t understand, if this happens, don’t push forward and refactor under red. Undo, return to green, and make incremental changes until you regain clarity</li>
</ul>
</li>
<li>discovering deeper abstractions
<ul>
<li><code class="language-text">successor</code> is important, and separating it from <code class="language-text">quantity</code> gives both methods a single responsibility if you conflate <code class="language-text">choosing-what-to-sing-for-any-number(quantity)</code> with deciding-what-verse-to-sing-next(successor), the resulting method would be harder to understand, future refactorings would be more difficult, and attempts to change the code for 1 idea might accidentally break it for other.</li>
</ul>
</li>
</ul>
<h2 id="replacing-difference-with-sameness" style="position:relative;"><a href="#replacing-difference-with-sameness" aria-label="replacing difference with sameness permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>replacing difference with sameness</h2>
<ul>
<li><a href="#follow-the-flocking-rules">follow the flocking rules</a></li>
</ul>
<h2 id="equivocating-about-names" style="position:relative;"><a href="#equivocating-about-names" aria-label="equivocating about names permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Equivocating about names</h2>
<ul>
<li>the challenge is identifying the current concept and coming up with a good name.
<ul>
<li>It must represent a smaller abstraction within that larger one.</li>
<li>names should neither be too general nor too specific. For example, thing is too broad, and ItOrOne too narrow.</li>
</ul>
</li>
<li>when perfect name for a concept is elusive, there are couple strategies moving forward
<ul>
<li>time box 5 - 10 minutes to ponder, and then use the best name that you can come up with (usually with thesaurus in hand)</li>
<li>instantly choose a meaningless name like <code class="language-text">foo</code>. Like there is no point wasting time thinking about it now, the name will be obvious later</li>
<li>you can ask someone else, like fellow programmers or customers for help.</li>
<li>Arlo’s naming process
<ul>
<li><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/5f2f3d81d8a36d5ac599cb571b930d0b/2bef9/naming-as-a-process.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACE0lEQVR42k2STWsUQRCG90f4CwT/gP4ebzmIIAiKh1wELx4kh4AfoDfFkBhECZFgQkxCPkDRmITZNQaTmM0km9md3Z2Z3vns7n2ke3Y3NhRVL13v29VVVen3+xgzpxsKdvYPEXFicZIrduohF0FqcRh5ONVPRJFn8f76Js7SClopi41OxQR6IFhvNPm88R2v3bXYFzlzOx7Vs8jis4bDwuIjGhc1i5efv2Jp8gVZL74UHFaXpilhGOK3O0RRRFEUZFlKqxMhejFaa+I4puW71iutaTUaNN0zBmqXgsYMQSk18kpJXNfFPT2l2fTwPI+Tk7/4fru8l9KKmnIMx3x79OXhGVY7bIOWBUlPEAQBQRCSphKty0dHHKX/l6BSSEkniDDeNvo8pNkVNu7EioPz7iBVUdv/QijKu9rqOs7m1zKv7rL1fo5MSiqe32Fzu2oHcXh0zPj0T57M1+i0PGbXHMZebrF76PHnYJvHEzeY/TBOV6Q8uznGvWvXcU9dlqdmuH3lKqtvpo1gm2+7VYJI0PLbPF2oMrl0hBCCLeeYh+9+4NQD2i2Xj/MPWFmbIM01G29nmLpzn143oP7rN69v3WVvYZFKUUiSNB31JRQxYdQrJ58kxCIkS8s9jOPMmsktlCLOM/I8R/c1qSyQWg/WZjAMkyiLAmkmqJRdn14vLklaI0RkV8usVJHnJHFiY8uT0k76H6706LeYrETfAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="arlo naming process"
        title=""
        src="/static/5f2f3d81d8a36d5ac599cb571b930d0b/f058b/naming-as-a-process.png"
        srcset="/static/5f2f3d81d8a36d5ac599cb571b930d0b/c26ae/naming-as-a-process.png 158w,
/static/5f2f3d81d8a36d5ac599cb571b930d0b/6bdcf/naming-as-a-process.png 315w,
/static/5f2f3d81d8a36d5ac599cb571b930d0b/f058b/naming-as-a-process.png 630w,
/static/5f2f3d81d8a36d5ac599cb571b930d0b/40601/naming-as-a-process.png 945w,
/static/5f2f3d81d8a36d5ac599cb571b930d0b/2bef9/naming-as-a-process.png 1024w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></li>
</ul>
</li>
<li><a href="https://blog.thecodewhisperer.com/permalink/a-model-for-improving-names">J.B. Rainsberger’s model for improving name</a>
<ul>
<li><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/0c57769429c29305c7fdddfc21c888dc/29007/jbrains-naming-process.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 77.21518987341771%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAADJklEQVR42kVUa2/iRhTl//+Fqp+afmhW3VbVLkm0m2bJGszyiHnYBGJY42CMbcDvBzaeeyqPSXola6Sx55x7zj2eBmOMgYhlecn8KGeWmzHdipixT1ianRkRMQCsOJ9ZGEXsSRqxT5+bTGh3WH8wZF++3rOO2GWbjUFxHLMGAOzcFP90TYjKAX+0DPxyt8GfwhZD1cVfggFZ81EXAVTWDxjfiaMQ+vondF2D63lUAdLumNL9yCblNSR57dPHW4FedIt2fk7t2YE0J6GVnVCUFiStfBprIc30gNRtRMfgRLZ3ovhUMzYqRVlRXhpgEDsCrq5+g2kaeKuSMSibEIewQJDkUI0jRlqA78oBg2WIue7TV2GMJIl5hzAMA34Q8MPG1sSX+3/hej5OpxxFcQYR1fLiEIqiIAyDCxGhL68wHPRIlifI85waYRhiKivwfB9rXceTJMFxbCiKDKHdwfBJQq8/wKPQxmw+x4uqwnYcxEnCQbfGBg+tR/rUvMFoPKFGHMfoD4fo9noQu128LH9ibbroyTr8IEKaJvD9AIaxxXyx4OBVA22xC6EjYqEu8e3xkYztFlmWUaMsGSzb5j6laQzbTfHr3StuhnuoSxWvmw3vRNd1NG9u+bdVpVmGnWXh6LowTZPeYtDQ7ASzTcwj4Xke/DjHdcvA320D5s5CcpG2PxwwlKQqGvXJi6/VWnlXxZkxRg19n+K6vePSoihEmjN05i7EuYu8pPdJL1crPqxKqrPf871zWeIN6B1wc8ggLlz4QQhWFlA0Gx87Fq4eDKT5mUepqhd1CWk0wnq9xilLLzTs8r5ql/jKY0NlDst2oChTiJM1fv9m4uphA0UPuRUXWdw3RkCcA15cwksIaQG4SUlOWCDOzjXg/njkMsLAx7Pm4INgQrNjOP4J55L/6pxfsyL0Jwt8bklofp/i+raHwfgZ8mJJ0vQZp+JMDdf10Ly9w+Fw5CJ2hxAt+Yiooq5EsVpW5edc32M46OPHjy5EsYN2W8BkOoEym1EcRfWU1eUK0ngMc7f7/wKox8ejVAMSTgXD2gq5j73+EJOpDMbeh0YXcvoPl9BZpccXqEAAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="jb naming process"
        title=""
        src="/static/0c57769429c29305c7fdddfc21c888dc/f058b/jbrains-naming-process.png"
        srcset="/static/0c57769429c29305c7fdddfc21c888dc/c26ae/jbrains-naming-process.png 158w,
/static/0c57769429c29305c7fdddfc21c888dc/6bdcf/jbrains-naming-process.png 315w,
/static/0c57769429c29305c7fdddfc21c888dc/f058b/jbrains-naming-process.png 630w,
/static/0c57769429c29305c7fdddfc21c888dc/40601/jbrains-naming-process.png 945w,
/static/0c57769429c29305c7fdddfc21c888dc/78612/jbrains-naming-process.png 1260w,
/static/0c57769429c29305c7fdddfc21c888dc/29007/jbrains-naming-process.png 1600w"
        sizes="(max-width: 630px) 100vw, 630px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></li>
</ul>
</li>
<li>deriving names from responsibilities
<ul>
<li>focus on the difference and find abstraction one level higher</li>
<li>when creating an abstraction, first describe its responsibility as you understand it at the moment, then choose a name which reflects the responsibility. The effort you put into selecting good names right now pays off by making it easier to recognize perfect names later.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="obeying-the-liskov-substitution-principle" style="position:relative;"><a href="#obeying-the-liskov-substitution-principle" aria-label="obeying the liskov substitution principle permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>obeying the liskov substitution principle</h2>
<ul>
<li>every piece of knowledge is a dependency, and the way that <code class="language-text">quantity</code> is written requires verse to know too many things. If <code class="language-text">quantity</code> were more trustworthy, <code class="language-text">verse</code> could know less</li>
<li>the idea of reducing the number of dependencies imposed upon message senders by requiring the receivers return trustworthy objects is a generalization of the Liskov Substitution Principle.</li>
<li>liskov, in plain terms, requires that objects be what they promise they are. When using inheritance, you must be able to freely substitute an instance of a subclass for an instance of its superclass. Subclasses, by definitions, are all their superclasses, plus more, so this substitution should always work.</li>
<li>liskov violations force message senders to have knowledge of the various return types, and to either treat them differently or convert them into something consistent.</li>
</ul>
<h2 id="depending-on-abstraction" style="position:relative;"><a href="#depending-on-abstraction" aria-label="depending on abstraction permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>depending on abstraction</h2>
<ul>
<li>abstraction provide name for the consolidated code, allowing the name to be as a shortcut for an idea, independent of its current implementation</li>
<li>the abstractions tell you where your code relies upon an idea. But to get this benefit, you must refer to an abstraction in every place where it applies.</li>
</ul>
<h1 id="separating-responsibilities" style="position:relative;"><a href="#separating-responsibilities" aria-label="separating responsibilities permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>separating responsibilities</h1>
<ul>
<li>appreciating immutability
<ul>
<li>immutable objects are easy to understand and to reason about.</li>
<li>because they are easy to reason about, immutable objects are also easy to test. Tests for immutable objects avoid extra setup, which makes the tests cheaper to write and easier to understand.</li>
<li>another key virtue of immutable objects is that they are thread safe. You can’t break shared state if shared state doesn’t change.</li>
<li>the best programming strategy is to write the simplest code possible and measure its performance once you’re done. If the whole is not acceptably fast, profile the performance, and speed up the slowest parts.</li>
<li>your goal is to optimize for easy of understanding while maintaining performane that’s fast enough. Don’t sacrifice readability before having solid performance data.</li>
</ul>
</li>
</ul>
<h2 id="managing-dependencies" style="position:relative;"><a href="#managing-dependencies" aria-label="managing dependencies permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="/manage-dependencies">managing dependencies</a></h2>
<ul>
<li>this topic is covered as separate <a href="/manage-dependencies">summary blog</a></li>
</ul>
<h2 id="selecting-the-target-code-smell" style="position:relative;"><a href="#selecting-the-target-code-smell" aria-label="selecting the target code smell permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>selecting the target code smell</h2>
<ul>
<li>the truth about refactoring is that it sometimes makes things worse, in which case your efforts serve gallantly to disprove an idea.</li>
<li>it’s entirely possible that you do not yet know what change will make it open. At this point, you must decide whether it’s better to proceed with additional modifications to teh code, or better to revert the previous change and take a different tack.</li>
<li>you must continue to be guided by code smells, and doing so requires that you identify the smells in the current code.</li>
<li><strong>superfluous differences raises the cost of reading code, and increases the difficulty of future refactorings.</strong></li>
<li>identifying patterns in code
<ul>
<li>one way to get better at identifying smells is to practice describing the characteristics/patterns of code. Including any patterns that you see, and things you like, hate, or don’t understand.</li>
<li>the following questions draw attention to a number of interesting characteristics of the code as it’s written so far:
<ul>
<li>do any method have the same shape?</li>
<li>do any method take an argument of the same name?</li>
<li>do argument of the same name always mean the same thing?</li>
<li>if you were going to break this class into 2 pieces, where’s the dividing line?</li>
<li>do the tests in the conditionals have any thing in common?</li>
<li>how many branches do the conditionals have?</li>
<li>do the methods contain any code other than the conditional?</li>
<li>does each method depend more on the argument that got passed, or on the class as a whole?</li>
<li>these eight questions group certain methods together. The same-shaped, same kind of conditional testing, bottle number taking, argument-depending, flocked five methods fall into one group, and the song, verses, and verse methods into another.</li>
</ul>
</li>
<li>trust the process
<ul>
<li>if you adhere to a recipe and tests start failing, it’s likely that there’s something about the problem that you don’t yet understand.</li>
</ul>
</li>
<li>insisting upon messages
<ul>
<li>as an oo practitioner, when you see a conditional, the hairs on your neck should stand up. You should feel entitled to send messages to objects. It means that objects are missing and suggests that subsequent refactorings are needed to reveal them.</li>
<li>Collaborators must be brought together in useful combinations, and assembling these combinations requires knowing which objects are suitable.</li>
<li>there’s a big difference between a conditional that selects the correct object and one that supplies behavior. The first is acceptable and generally unavaidable. THe second suggests that you’re missing objects in your domain.</li>
</ul>
</li>
<li>squint test rule
<ul>
<li>put the code of interest on your screen</li>
<li>lean back</li>
<li>squint your eyes such that you can still see the code, but can no longer read it</li>
<li>look for:
<ul>
<li>change in shape, and</li>
<li>change in color</li>
</ul>
</li>
<li>changes in indentation reveal the presense of conditionals, the more nested level of conditionals, the more complexed/complicated the code site.</li>
<li>changes in color indicate difference in the level of abstraction. A method that intermixes many colors tells a story that will be difficult to follow.</li>
</ul>
</li>
<li>analyzing the “flocked five” (<code class="language-text">quantity</code>, <code class="language-text">container</code>, <code class="language-text">action</code>, <code class="language-text">pronoun</code>, <code class="language-text">successor</code>) using the above questions
<ul>
<li>do any methods have the same shape?
<ul>
<li>they all have the same shape according to squint tests</li>
</ul>
</li>
<li>do any methods take an argument of the same name?
<ul>
<li>yes, the flocked five methods take number as an argument and the arguments represent the bottle number rather than a verse number from the argument number of verse method.</li>
<li><strong>having multiple methods that take the same argument (indicate duplicate concept, not duplicate name) is a code smell. In an ideal world, each different concept would have its own unique, precise name, and there would be no ambiguity.</strong></li>
</ul>
</li>
<li>if you were going to break this class into 2 pieces, where’s the dividing line?
<ul>
<li>after verse and before the flocked five methods.</li>
</ul>
</li>
<li>do the tests in the conditionals have anything in common?
<ul>
<li>test for <code class="language-text">number</code> to be exactly equal to another value</li>
<li><strong>testing for equality has several benefits over the alternatives. Most obviously, it narrows the range of things that meet condition. This reduces the difficulty of debugging errors. Testing of equality also makes the code more precise, and this precision enables future refactorings.</strong></li>
</ul>
</li>
<li>how many branches do the conditionals have?</li>
<li>do the methods contain any code other than the conditional?
<ul>
<li>no</li>
</ul>
</li>
<li>do methods that take <code class="language-text">number</code> as an argument depend more on <code class="language-text">number</code>, or more on the class as a whole?</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="extracting-classes" style="position:relative;"><a href="#extracting-classes" aria-label="extracting classes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>extracting classes</h2>
<ul>
<li><em>Primitive obsession</em> is when you use one of the built-in data types to represent a concept in your domain. Obsessing on a primitive results in code that passes built-in types around and supplies behavior for them.</li>
<li>use <em>Extract class</em> to create a home for the domain concepts in place of the primitive.</li>
</ul>
<h3 id="modelling-abstractions" style="position:relative;"><a href="#modelling-abstractions" aria-label="modelling abstractions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>modelling abstractions</h3>
<ul>
<li>it’s easy to imagine creating objects that stand in for things, but the power of OO is that it lets you model ideas, things that don’t physically exist. Modellable ideas often lie dormant in interactions between objects.</li>
<li>experienced OO programmers deftly create virtual worlds in which ideas are as real as physical things.</li>
</ul>
<h3 id="naming-classes" style="position:relative;"><a href="#naming-classes" aria-label="naming classes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>naming classes</h3>
<ul>
<li>naming methods at one higher level of abstraction than their current implementation.</li>
<li>refer to <a href="#equivocating-about-names">equivocating about names</a></li>
</ul>
<h2 id="combing-objects-with-composition" style="position:relative;"><a href="#combing-objects-with-composition" aria-label="combing objects with composition permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>combing objects with composition</h2>
<h1 id="achieving-openness" style="position:relative;"><a href="#achieving-openness" aria-label="achieving openness permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Achieving openness</h1>
<h2 id="sharing-role-behavior-with-modules" style="position:relative;"><a href="#sharing-role-behavior-with-modules" aria-label="sharing role behavior with modules permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sharing role behavior with modules</h2>
<h2 id="acquiring-behavior-through-inheritance" style="position:relative;"><a href="#acquiring-behavior-through-inheritance" aria-label="acquiring behavior through inheritance permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>acquiring behavior through inheritance</h2>
<h3 id="understanding-classical-inheritance" style="position:relative;"><a href="#understanding-classical-inheritance" aria-label="understanding classical inheritance permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>understanding classical inheritance</h3>
<ul>
<li>a mechanism for automatic message delegation. It defines a forwarding path for not-understood messages.???</li>
<li>messages are forwarded from subclass to superclass.</li>
<li>inheritance is for specialization, NOT for sharing code</li>
</ul>
<h3 id="recognizing-where-to-use-inheritance" style="position:relative;"><a href="#recognizing-where-to-use-inheritance" aria-label="recognizing where to use inheritance permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>recognizing where to use inheritance</h3>
<ul>
<li>the problem that inheritance solves: highly related types that share common behavior but differ along some dimension (single class with several different but related types)</li>
<li>here is a typical progression for problems that inheritance solves:
<ul>
<li>your code starts with a concrete class
<ul>
<li><a href="https://github.com/serodriguez68/poodr-notes/blob/master/code_examples/chapter_6.rb#L2-L29">example of a concrete bicycle class</a></li>
</ul>
</li>
<li>
<h2 id="then-you-start-to-embedding-multiple-types-into-that-class" style="position:relative;"><a href="#then-you-start-to-embedding-multiple-types-into-that-class" aria-label="then you start to embedding multiple types into that class permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>then you start to embedding multiple types into that class</h2>
</li>
</ul>
</li>
</ul>
<h2 id="writing-inheritable-code" style="position:relative;"><a href="#writing-inheritable-code" aria-label="writing inheritable code permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>writing inheritable code</h2>
<h1 id="quotes" style="position:relative;"><a href="#quotes" aria-label="quotes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quotes</h1>
<p>“Writing code is the process of working your way to the next stable end point, not the end point itself”</p>
<p><strong>“DRY makes sense when it reduces the cost of change more than it increases the cost of understanding the code”</strong></p>
<p>“metrics are fallible but human opinion is no more precise. Checking metrics regularly will keep you humble and improve your code”</p>
<p>“shameless green is defined as the solution that quickly reaches green while prioritizing understandability over changeability.”</p>
<p>“it doesn’t dispute that DRY is good, rather, it believes that it is cheaper to manage temporary duplication than recover from incorrect abstractions.”</p>
<p>“Quick green excuses all sins”</p>
<p>“good design preserves maximum flexibility at minimum cost by putting off decisions at every opportunity, deferring commitments until more specific requirements arrive.”</p>
<p>“think of an object oriented application as a series of messages between a set of black boxes”</p>
<p>“the reason you’re writing tests is to save money, and every potential test must be evaluated against that criteria”</p>
<p>“when your intention is to defer a design decision, do the simplest thing that solves today’s problem. Isolate the code behind the best interface you can conceive and hunker down and wait for more information”</p>
<p>“the rules of thumb for testing private methods are: never write them, and if you do, never ever test them, unless of course it makes sense to do so.”</p>
<p>“making existing code open to a new requirement often requires identifying and naming abstractions. The flocking rules concentrate on turning difference into sameness, and thus are useful tools for unearthing abstractions.”</p>
<p>“the best tests are loosely coupled to the underlying code and test everything once and in the proper place. They add value without increasing costs”</p>
<p>“only talk to your immediate neighbors”</p>
<p>“Inheritance is for <strong>specialization</strong>, NOT for sharing code”</p>
<p>“no matter how complicated the code, the receiving object ultimately handles any message in one of two ways. It either responds directly or it passes the message on to some other object for a response.”</p>
<h1 id="references" style="position:relative;"><a href="#references" aria-label="references permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References</h1>
<p><a href="https://github.com/keyvanakbary/learning-notes/blob/master/books/99-bottles-of-oop.md">https://github.com/keyvanakbary/learning-notes/blob/master/books/99-bottles-of-oop.md</a>
<a href="https://github.com/serodriguez68/poodr-notes">https://github.com/serodriguez68/poodr-notes</a>
<a href="https://matteopallini.com/bottles-oop-summary/">https://matteopallini.com/bottles-oop-summary/</a>
<a href="https://blog.cleancoder.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html">https://blog.cleancoder.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html</a>
<a href="https://lionadi.wordpress.com/2020/12/04/oop-tdd-99-bottles-notes-part-1-simplicity/">https://lionadi.wordpress.com/2020/12/04/oop-tdd-99-bottles-notes-part-1-simplicity/</a>
<a href="https://gist.github.com/speric/31ae0987d21eac1d4f87">https://gist.github.com/speric/31ae0987d21eac1d4f87</a></p></section><hr/><footer><div class="bio"><div data-gatsby-image-wrapper="" style="width:50px;height:50px" class="gatsby-image-wrapper bio-avatar"><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#685848;width:50px;height:50px;position:relative"></div><picture><source type="image/avif" data-srcset="/static/b811602c8c8ce14b66aae6613c8968f4/d4bf4/tony-avatar.avif 50w,/static/b811602c8c8ce14b66aae6613c8968f4/ee81f/tony-avatar.avif 100w" sizes="50px"/><source type="image/webp" data-srcset="/static/b811602c8c8ce14b66aae6613c8968f4/3faea/tony-avatar.webp 50w,/static/b811602c8c8ce14b66aae6613c8968f4/6a679/tony-avatar.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" data-src="/static/b811602c8c8ce14b66aae6613c8968f4/d24ee/tony-avatar.jpg" data-srcset="/static/b811602c8c8ce14b66aae6613c8968f4/d24ee/tony-avatar.jpg 50w,/static/b811602c8c8ce14b66aae6613c8968f4/64618/tony-avatar.jpg 100w" alt="Profile picture"/></picture><noscript><picture><source type="image/avif" srcSet="/static/b811602c8c8ce14b66aae6613c8968f4/d4bf4/tony-avatar.avif 50w,/static/b811602c8c8ce14b66aae6613c8968f4/ee81f/tony-avatar.avif 100w" sizes="50px"/><source type="image/webp" srcSet="/static/b811602c8c8ce14b66aae6613c8968f4/3faea/tony-avatar.webp 50w,/static/b811602c8c8ce14b66aae6613c8968f4/6a679/tony-avatar.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" layout="fixed" data-main-image="" style="opacity:0" sizes="50px" decoding="async" loading="lazy" src="/static/b811602c8c8ce14b66aae6613c8968f4/d24ee/tony-avatar.jpg" srcSet="/static/b811602c8c8ce14b66aae6613c8968f4/d24ee/tony-avatar.jpg 50w,/static/b811602c8c8ce14b66aae6613c8968f4/64618/tony-avatar.jpg 100w" alt="Profile picture"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><p>Written by <strong>Tony Vo</strong> <!-- -->father, husband, son and software developer<!-- --> <a href="https://twitter.com/ttrungvo">Twitter</a></p></div></footer></article><nav class="blog-post-nav"><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/listen-to-tests/">← <!-- -->Listen to tests, test smells and patterns</a></li><li><a rel="next" href="/asset-allocation-summary/">The Intelligent Asset Allocator by William Bernstein Summary<!-- --> →</a></li></ul></nav><div><div id="disqus_thread"></div></div></main><footer>© <!-- -->2023<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.com">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/practical-guide-oop-summary/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-dff359f42b4b1323adff.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-fe49012c596fa8e02e94.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-137bafc43fb95c27cc25.js\"],\"component---src-pages-tags-js\":[\"/component---src-pages-tags-js-2fd0383b8dc4270b2974.js\"],\"component---src-pages-using-typescript-tsx\":[\"/component---src-pages-using-typescript-tsx-b3f1483ead526a95c936.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-161de0eab28c1f89b9c7.js\"],\"component---src-templates-tags-js\":[\"/component---src-templates-tags-js-937a80c11540749e5e6b.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="a7f316615699eee99dfa";</script><script src="/webpack-runtime-367126daf6d5ad1339b6.js" async></script><script src="/framework-24a4af5e8d436029005a.js" async></script><script src="/app-dff359f42b4b1323adff.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>